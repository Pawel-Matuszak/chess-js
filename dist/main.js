/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/css-loader/dist/cjs.js!./src/style.css":
/*!*************************************************************!*\
  !*** ./node_modules/css-loader/dist/cjs.js!./src/style.css ***!
  \*************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/noSourceMaps.js */ \"./node_modules/css-loader/dist/runtime/noSourceMaps.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../node_modules/css-loader/dist/runtime/api.js */ \"./node_modules/css-loader/dist/runtime/api.js\");\n/* harmony import */ var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1__);\n// Imports\n\n\nvar ___CSS_LOADER_EXPORT___ = _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_1___default()((_node_modules_css_loader_dist_runtime_noSourceMaps_js__WEBPACK_IMPORTED_MODULE_0___default()));\n___CSS_LOADER_EXPORT___.push([module.id, \"@import url(https://fonts.googleapis.com/css2?family=Libre+Franklin:wght@400;500&display=swap);\"]);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `*{\r\n  box-sizing: border-box;\r\n    -moz-box-sizing: border-box;\r\n    -webkit-box-sizing: border-box;\r\n  padding: 0;\r\n  margin: 0;\r\n  font-family: 'Libre Franklin', sans-serif;\r\n}\r\n\r\nbody{\r\n  background: rgb(18,18,18);\r\n  height: 95vh;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.container{\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n  align-items: flex-start;\r\n  gap: 1rem;\r\n}\r\n\r\n.wrapper{\r\n  max-width: 350px;\r\n  display: flex;\r\n  align-items: center;\r\n  flex-direction: column;\r\n}\r\n\r\n.board{\r\n  position: relative;\r\n  width: fit-content;\r\n  user-select: none;\r\n}\r\n\r\n.row{\r\n  display: flex;\r\n}\r\n\r\n.square{\r\n  width: 100px;\r\n  height: 100px;\r\n}\r\n\r\n.piece{\r\n  position: absolute;\r\n  width: 100px;\r\n  height: 100px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  font-size: 50px;\r\n  z-index: 10;\r\n  \r\n  \r\n}\r\n\r\n.square-move{\r\n  position: absolute;\r\n  width: 100px;\r\n  height: 100px;\r\n}\r\n\r\n.point{\r\n  position: absolute;\r\n  top:50%;\r\n  left:50%;\r\n  transform: translate(-50%, -50%);\r\n  width: 25px;\r\n  height: 25px;\r\n  border-radius: 50%;\r\n  background: rgba(150, 150, 150, 0.5);\r\n}\r\n\r\n\r\n.highlight{\r\n  position: absolute;\r\n  width: 100px;\r\n  height: 100px;\r\n  background: rgba(199, 11, 11, 0.5);\r\n}\r\n\r\n.move-highlight{\r\n  position: absolute;\r\n  width: 100px;\r\n  height: 100px;\r\n  border: 1px solid rgb(72, 107, 160, 0.5);\r\n  background: rgba(65, 130, 168, 0.247);\r\n  border-radius: 2px;\r\n}\r\n\r\n.gameMessage{\r\n  display: none;\r\n  position: fixed;\r\n  top: 50%;\r\n  left:50%;\r\n  transform: translate(-50%, -50%);\r\n  min-width: 325px;;\r\n  min-height:350px;\r\n  z-index: 999;\r\n  box-shadow: 1px 0px 5px rgba(0, 0, 0, 0.5);\r\n  border-radius: 5px;\r\n  font-size: 1.9rem;\r\n  justify-content: center;\r\n  align-items: center;\r\n  flex-direction: column;  \r\n  gap: 2px;\r\n  color: rgb(228, 228, 228);\r\n  background: rgb(18,18,18);\r\n  font-weight: 500;\r\n}\r\n\r\n.gameMsgTitle{\r\n  font-weight: 500;\r\n}\r\n\r\n.gameMsgSubtitle{\r\n  font-weight: 400;\r\n  font-size: 1.5rem;\r\n}\r\n\r\n.exit-modal{\r\n  position: absolute;\r\n  top:15px;\r\n  right: 25px;\r\n}\r\n\r\n.exit-modal:hover{\r\n  cursor: pointer;\r\n}\r\n\r\n.moves-list{\r\n  text-align: center;\r\n  background: rgba(0, 0, 0, 0.5);\r\n  /* rgb(18, 18, 18); */\r\n  color: rgb(228, 228, 228);\r\n  margin: 8px;\r\n  height: 500px;\r\n  min-width: 300px;\r\n  display: grid;\r\n  grid-template-columns: repeat(2, 50%);\r\n  grid-auto-rows: 25px;\r\n  row-gap: 10px;\r\n  padding: 15px;\r\n  overflow-y: auto;\r\n  border-radius: 10px;\r\n}\r\n\r\n.move{\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  margin: 0 15px;\r\n  border-radius: 5px;\r\n  font-size: 1rem;\r\n}\r\n\r\n.move:hover{\r\n  cursor: pointer;\r\n}\r\n\r\n.move-list-header{\r\n  grid-column: 1/3;\r\n}\r\n\r\n.button-wrapper{\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  margin: 10px 0;\r\n  width: 100%;\r\n}\r\n\r\n.button-group {\r\n  display: flex;\r\n  gap: 0.5rem;\r\n  justify-content: center;\r\n}\r\n\r\n.button-wrapper button, .button-group button, .pgnBtn{\r\n  background: none;\r\n}\r\n\r\n.nav-group {\r\n  justify-content: center;\r\n}\r\n\r\n.nav-group button svg {\r\n  stroke-width: 4;\r\n}\r\n\r\n.threat-group {\r\n  justify-content: space-between;\r\n}\r\n\r\nbutton{\r\n  outline: none;\r\n  border: 0;\r\n  background-color: rgba(27, 113, 184, 0.9);\r\n  color: rgb(228, 228, 228);\r\n  font-size: .9rem;\r\n  padding: 8px 12px;\r\n  margin: 0;\r\n  border-radius: 6px;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\nbutton:hover{\r\n  cursor: pointer;\r\n  background: rgb(60, 60, 60) !important;\r\n}\r\n\r\n.icon-button {\r\n  padding: 8px 12px;\r\n}\r\n\r\n.icon-button svg {\r\n  width: 20px;\r\n  height: 20px;\r\n}\r\n\r\n.pgnModalWrapper{\r\n  position: absolute;\r\n  top:0;\r\n  left:0;\r\n  background: rgba(0, 0, 0, 0.616);\r\n  width: 100vw;\r\n  height: 100vh;\r\n  z-index: 9999;\r\n}\r\n\r\n.pgnModal{\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: absolute;\r\n  top:50%;\r\n  left:50%;\r\n  transform: translate(-50%, -50%);\r\n  min-width: 350px;\r\n  min-height:350px;\r\n  border-radius: 10px;\r\n  padding: 15px 25px;\r\n  color: rgb(228, 228, 228);\r\n  background: rgb(18,18,18);\r\n  font-weight: 500;\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.pgnExit{\r\n  position: absolute;\r\n  top: 5px;\r\n  right: 10px;\r\n}\r\n\r\n.pgnExit:hover{\r\n  cursor: pointer;\r\n}\r\n\r\n.pgnCopy{\r\n  width: 50%;\r\n  margin: auto;\r\n  margin-top: 10px;\r\n}\r\n\r\ntextarea{\r\n  min-width: 250px;\r\n  min-height:300px;\r\n  resize: none;\r\n  color: rgb(228, 228, 228);\r\n  outline: none;\r\n  border: none;\r\n  padding: 15px;\r\n  background: rgb(30,30,30);\r\n  border-radius: 5px;\r\n  font-size: 1rem;\r\n  margin-top: 10px;\r\n}\r\n\r\n.pgnBtn{\r\n  width: 50%;\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n\r\n.play-btn, .ai-btn, .cvsc-btn{\r\n  width: 95%;\r\n  padding: 12px 0;\r\n  font-size: 1.1rem;\r\n  justify-content: center;\r\n}\r\n\r\n.ai-btn, .cvsc-btn {\r\n  background-color: rgb(44, 44, 44);\r\n  border: 1px solid rgb(88, 88, 88);\r\n}\r\n\r\n.ai-btn:hover, .cvsc-btn:hover {\r\n  background-color: rgb(60, 60, 60);\r\n  border-color: rgb(120, 120, 120);\r\n}\r\n\r\n.play-btn svg, .ai-btn svg, .cvsc-btn svg {\r\n  width: 24px;\r\n  height: 24px;\r\n  stroke: currentColor;\r\n}\r\n\r\n\r\n\r\n.pre-game-wrapper{\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 1rem;\r\n  color: rgb(228, 228, 228);\r\n  background: rgb(38, 38, 38);\r\n  font-weight: 500;\r\n  font-size: 1.1rem;\r\n  border-radius: 6px;\r\n  padding: 15px 25px;\r\n  box-shadow: 1px 0px 5px rgba(43, 43, 43, 0.5);\r\n}\r\n\r\n.in-game-wrapper{\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 100%;\r\n  background: rgb(38, 38, 38);\r\n  color: rgb(228, 228, 228);\r\n  font-weight: 500;\r\n  font-size: 1.1rem;\r\n  border-radius: 6px;\r\n  box-shadow: 1px 0px 5px rgba(43, 43, 43, 0.5);\r\n}\r\n\r\n.main-menu-btn{\r\n  align-self: flex-start;\r\n  background: none;\r\n  padding: 16px 0;\r\n}\r\n\r\n.main-menu-btn:hover{\r\n  cursor: pointer;\r\n  background: none;\r\n}\r\n\r\n.inGameTopWrapper{\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  width: 95%;\r\n}\r\n\r\n.in-game-difficulty{\r\n  font-size: .9rem;\r\n  font-weight: 400;\r\n  padding: 8px 12px;\r\n}\r\n\r\n.difficulty-wrapper{\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 5px;\r\n  width: 95%;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.difficulty-slider {\r\n  -webkit-appearance: none;\r\n  appearance: none; \r\n  width: 100%;\r\n  height: 8px;\r\n  border-radius: 5px;\r\n  background: rgb(70, 70, 70);\r\n  outline: none;\r\n}\r\n\r\n.difficulty-slider::-webkit-slider-thumb {\r\n  -webkit-appearance: none;\r\n  appearance: none;\r\n  width: 20px;\r\n  height: 20px;\r\n  border-radius: 50%;\r\n  background: rgba(27, 123, 201, 0.9);\r\n  cursor: pointer;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.difficulty-slider::-moz-range-thumb {\r\n  width: 20px;\r\n  height: 20px;\r\n  border-radius: 50%;\r\n  background: rgba(27, 123, 201, 0.9);\r\n  cursor: pointer;\r\n  border: none;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.difficulty-slider:hover::-webkit-slider-thumb {\r\n  background-color: rgba(51, 113, 164, 0.9);\r\n}\r\n\r\n.difficulty-slider:hover::-moz-range-thumb {\r\n  background-color: rgba(51, 113, 164, 0.9);\r\n}\r\n\r\n@media screen and (max-width: 1165px){\r\n  .point{\r\n    width: 15px;\r\n    height: 15px;\r\n  }\r\n\r\n  .board{\r\n    width: 600px;\r\n    height: 600px;\r\n  }\r\n\r\n\r\n  .piece, .square-move, .square, .highlight, .move-highlight {\r\n    width: 75px;\r\n    height: 75px;\r\n  }\r\n}\r\n\r\n@media screen and (max-width: 975px){\r\n  .wrapper{\r\n    max-width: unset;\r\n    display: grid;\r\n    grid-template-columns: repeat(2, 1fr);\r\n    \r\n  }\r\n\r\n  .pgnBtn {\r\n    grid-column: 1/3;\r\n    width: 100%;\r\n    margin: 15px auto;\r\n  }\r\n\r\n  .button-wrapper{\r\n    grid-template-columns: 1fr;\r\n    width: 75%;\r\n    margin: auto;\r\n  }\r\n\r\n}\r\n\r\n@media screen and (max-width: 630px){\r\n\r\n  .moves-list{\r\n    min-width: 200px;\r\n  }\r\n\r\n  .point{\r\n    width: 10px;\r\n    height: 10px;\r\n  }\r\n\r\n  .board{\r\n    width: 400px;\r\n    height: 400px;\r\n  }\r\n\r\n\r\n  .piece, .square-move, .square, .highlight, .move-highlight {\r\n    width: 50px;\r\n    height: 50px;\r\n  }\r\n\r\n}\r\n\r\n@media screen and (max-width: 400px){\r\n  .moves-list{\r\n    min-width: unset;\r\n  }\r\n\r\n  .board{\r\n    width: 300px;\r\n    height: 300px;\r\n  }\r\n\r\n  .piece, .square-move, .square, .highlight, .move-highlight {\r\n    width: 37.5px;\r\n    height: 37.5px;\r\n  }\r\n\r\n}`, \"\"]);\n// Exports\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (___CSS_LOADER_EXPORT___);\n\n\n//# sourceURL=webpack://chess/./src/style.css?./node_modules/css-loader/dist/cjs.js");

/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/api.js":
/*!*****************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/api.js ***!
  \*****************************************************/
/***/ ((module) => {

"use strict";
eval("\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};\n\n//# sourceURL=webpack://chess/./node_modules/css-loader/dist/runtime/api.js?");

/***/ }),

/***/ "./node_modules/css-loader/dist/runtime/noSourceMaps.js":
/*!**************************************************************!*\
  !*** ./node_modules/css-loader/dist/runtime/noSourceMaps.js ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
eval("\n\nmodule.exports = function (i) {\n  return i[1];\n};\n\n//# sourceURL=webpack://chess/./node_modules/css-loader/dist/runtime/noSourceMaps.js?");

/***/ }),

/***/ "./node_modules/js-chess-engine/dist/js-chess-engine.js":
/*!**************************************************************!*\
  !*** ./node_modules/js-chess-engine/dist/js-chess-engine.js ***!
  \**************************************************************/
/***/ (function(module) {

eval("!function(t,e){ true?module.exports=e():0}(this,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"\",i(i.s=0)}([function(t,e,i){\"use strict\";i.r(e),i.d(e,\"Game\",(function(){return $})),i.d(e,\"moves\",(function(){return J})),i.d(e,\"status\",(function(){return V})),i.d(e,\"getFen\",(function(){return Y})),i.d(e,\"move\",(function(){return z})),i.d(e,\"aiMove\",(function(){return X}));const n=[\"A\",\"B\",\"C\",\"D\",\"E\",\"F\",\"G\",\"H\"],o=[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\"],s={KING_W:\"K\",QUEEN_W:\"Q\",ROOK_W:\"R\",BISHOP_W:\"B\",KNIGHT_W:\"N\",PAWN_W:\"P\",KING_B:\"k\",QUEEN_B:\"q\",ROOK_B:\"r\",BISHOP_B:\"b\",KNIGHT_B:\"n\",PAWN_B:\"p\"},r=\"black\",c=\"white\",l=[0,1,2,3,4],a={0:1,1:2,2:2,3:3,4:3,5:4},u={0:2,1:2,2:4,3:4,4:5,5:5},h={fullMove:1,halfMove:0,enPassant:null,isFinished:!1,checkMate:!1,check:!1,turn:c},g=Object.assign({pieces:{E1:\"K\",D1:\"Q\",A1:\"R\",H1:\"R\",C1:\"B\",F1:\"B\",B1:\"N\",G1:\"N\",A2:\"P\",B2:\"P\",C2:\"P\",D2:\"P\",E2:\"P\",F2:\"P\",G2:\"P\",H2:\"P\",E8:\"k\",D8:\"q\",A8:\"r\",H8:\"r\",C8:\"b\",F8:\"b\",B8:\"n\",G8:\"n\",A7:\"p\",B7:\"p\",C7:\"p\",D7:\"p\",E7:\"p\",F7:\"p\",G7:\"p\",H7:\"p\"},castling:{whiteShort:!0,blackShort:!0,whiteLong:!0,blackLong:!0}},h),f={UP:{A1:\"A2\",A2:\"A3\",A3:\"A4\",A4:\"A5\",A5:\"A6\",A6:\"A7\",A7:\"A8\",A8:null,B1:\"B2\",B2:\"B3\",B3:\"B4\",B4:\"B5\",B5:\"B6\",B6:\"B7\",B7:\"B8\",B8:null,C1:\"C2\",C2:\"C3\",C3:\"C4\",C4:\"C5\",C5:\"C6\",C6:\"C7\",C7:\"C8\",C8:null,D1:\"D2\",D2:\"D3\",D3:\"D4\",D4:\"D5\",D5:\"D6\",D6:\"D7\",D7:\"D8\",D8:null,E1:\"E2\",E2:\"E3\",E3:\"E4\",E4:\"E5\",E5:\"E6\",E6:\"E7\",E7:\"E8\",E8:null,F1:\"F2\",F2:\"F3\",F3:\"F4\",F4:\"F5\",F5:\"F6\",F6:\"F7\",F7:\"F8\",F8:null,G1:\"G2\",G2:\"G3\",G3:\"G4\",G4:\"G5\",G5:\"G6\",G6:\"G7\",G7:\"G8\",G8:null,H1:\"H2\",H2:\"H3\",H3:\"H4\",H4:\"H5\",H5:\"H6\",H6:\"H7\",H7:\"H8\",H8:null},DOWN:{A1:null,A2:\"A1\",A3:\"A2\",A4:\"A3\",A5:\"A4\",A6:\"A5\",A7:\"A6\",A8:\"A7\",B1:null,B2:\"B1\",B3:\"B2\",B4:\"B3\",B5:\"B4\",B6:\"B5\",B7:\"B6\",B8:\"B7\",C1:null,C2:\"C1\",C3:\"C2\",C4:\"C3\",C5:\"C4\",C6:\"C5\",C7:\"C6\",C8:\"C7\",D1:null,D2:\"D1\",D3:\"D2\",D4:\"D3\",D5:\"D4\",D6:\"D5\",D7:\"D6\",D8:\"D7\",E1:null,E2:\"E1\",E3:\"E2\",E4:\"E3\",E5:\"E4\",E6:\"E5\",E7:\"E6\",E8:\"E7\",F1:null,F2:\"F1\",F3:\"F2\",F4:\"F3\",F5:\"F4\",F6:\"F5\",F7:\"F6\",F8:\"F7\",G1:null,G2:\"G1\",G3:\"G2\",G4:\"G3\",G5:\"G4\",G6:\"G5\",G7:\"G6\",G8:\"G7\",H1:null,H2:\"H1\",H3:\"H2\",H4:\"H3\",H5:\"H4\",H6:\"H5\",H7:\"H6\",H8:\"H7\"},LEFT:{A1:null,A2:null,A3:null,A4:null,A5:null,A6:null,A7:null,A8:null,B1:\"A1\",B2:\"A2\",B3:\"A3\",B4:\"A4\",B5:\"A5\",B6:\"A6\",B7:\"A7\",B8:\"A8\",C1:\"B1\",C2:\"B2\",C3:\"B3\",C4:\"B4\",C5:\"B5\",C6:\"B6\",C7:\"B7\",C8:\"B8\",D1:\"C1\",D2:\"C2\",D3:\"C3\",D4:\"C4\",D5:\"C5\",D6:\"C6\",D7:\"C7\",D8:\"C8\",E1:\"D1\",E2:\"D2\",E3:\"D3\",E4:\"D4\",E5:\"D5\",E6:\"D6\",E7:\"D7\",E8:\"D8\",F1:\"E1\",F2:\"E2\",F3:\"E3\",F4:\"E4\",F5:\"E5\",F6:\"E6\",F7:\"E7\",F8:\"E8\",G1:\"F1\",G2:\"F2\",G3:\"F3\",G4:\"F4\",G5:\"F5\",G6:\"F6\",G7:\"F7\",G8:\"F8\",H1:\"G1\",H2:\"G2\",H3:\"G3\",H4:\"G4\",H5:\"G5\",H6:\"G6\",H7:\"G7\",H8:\"G8\"},RIGHT:{A1:\"B1\",A2:\"B2\",A3:\"B3\",A4:\"B4\",A5:\"B5\",A6:\"B6\",A7:\"B7\",A8:\"B8\",B1:\"C1\",B2:\"C2\",B3:\"C3\",B4:\"C4\",B5:\"C5\",B6:\"C6\",B7:\"C7\",B8:\"C8\",C1:\"D1\",C2:\"D2\",C3:\"D3\",C4:\"D4\",C5:\"D5\",C6:\"D6\",C7:\"D7\",C8:\"D8\",D1:\"E1\",D2:\"E2\",D3:\"E3\",D4:\"E4\",D5:\"E5\",D6:\"E6\",D7:\"E7\",D8:\"E8\",E1:\"F1\",E2:\"F2\",E3:\"F3\",E4:\"F4\",E5:\"F5\",E6:\"F6\",E7:\"F7\",E8:\"F8\",F1:\"G1\",F2:\"G2\",F3:\"G3\",F4:\"G4\",F5:\"G5\",F6:\"G6\",F7:\"G7\",F8:\"G8\",G1:\"H1\",G2:\"H2\",G3:\"H3\",G4:\"H4\",G5:\"H5\",G6:\"H6\",G7:\"H7\",G8:\"H8\",H1:null,H2:null,H3:null,H4:null,H5:null,H6:null,H7:null,H8:null},UP_LEFT:{A1:null,A2:null,A3:null,A4:null,A5:null,A6:null,A7:null,A8:null,B1:\"A2\",B2:\"A3\",B3:\"A4\",B4:\"A5\",B5:\"A6\",B6:\"A7\",B7:\"A8\",B8:null,C1:\"B2\",C2:\"B3\",C3:\"B4\",C4:\"B5\",C5:\"B6\",C6:\"B7\",C7:\"B8\",C8:null,D1:\"C2\",D2:\"C3\",D3:\"C4\",D4:\"C5\",D5:\"C6\",D6:\"C7\",D7:\"C8\",D8:null,E1:\"D2\",E2:\"D3\",E3:\"D4\",E4:\"D5\",E5:\"D6\",E6:\"D7\",E7:\"D8\",E8:null,F1:\"E2\",F2:\"E3\",F3:\"E4\",F4:\"E5\",F5:\"E6\",F6:\"E7\",F7:\"E8\",F8:null,G1:\"F2\",G2:\"F3\",G3:\"F4\",G4:\"F5\",G5:\"F6\",G6:\"F7\",G7:\"F8\",G8:null,H1:\"G2\",H2:\"G3\",H3:\"G4\",H4:\"G5\",H5:\"G6\",H6:\"G7\",H7:\"G8\",H8:null},DOWN_RIGHT:{A1:null,A2:\"B1\",A3:\"B2\",A4:\"B3\",A5:\"B4\",A6:\"B5\",A7:\"B6\",A8:\"B7\",B1:null,B2:\"C1\",B3:\"C2\",B4:\"C3\",B5:\"C4\",B6:\"C5\",B7:\"C6\",B8:\"C7\",C1:null,C2:\"D1\",C3:\"D2\",C4:\"D3\",C5:\"D4\",C6:\"D5\",C7:\"D6\",C8:\"D7\",D1:null,D2:\"E1\",D3:\"E2\",D4:\"E3\",D5:\"E4\",D6:\"E5\",D7:\"E6\",D8:\"E7\",E1:null,E2:\"F1\",E3:\"F2\",E4:\"F3\",E5:\"F4\",E6:\"F5\",E7:\"F6\",E8:\"F7\",F1:null,F2:\"G1\",F3:\"G2\",F4:\"G3\",F5:\"G4\",F6:\"G5\",F7:\"G6\",F8:\"G7\",G1:null,G2:\"H1\",G3:\"H2\",G4:\"H3\",G5:\"H4\",G6:\"H5\",G7:\"H6\",G8:\"H7\",H1:null,H2:null,H3:null,H4:null,H5:null,H6:null,H7:null,H8:null},UP_RIGHT:{A1:\"B2\",A2:\"B3\",A3:\"B4\",A4:\"B5\",A5:\"B6\",A6:\"B7\",A7:\"B8\",A8:null,B1:\"C2\",B2:\"C3\",B3:\"C4\",B4:\"C5\",B5:\"C6\",B6:\"C7\",B7:\"C8\",B8:null,C1:\"D2\",C2:\"D3\",C3:\"D4\",C4:\"D5\",C5:\"D6\",C6:\"D7\",C7:\"D8\",C8:null,D1:\"E2\",D2:\"E3\",D3:\"E4\",D4:\"E5\",D5:\"E6\",D6:\"E7\",D7:\"E8\",D8:null,E1:\"F2\",E2:\"F3\",E3:\"F4\",E4:\"F5\",E5:\"F6\",E6:\"F7\",E7:\"F8\",E8:null,F1:\"G2\",F2:\"G3\",F3:\"G4\",F4:\"G5\",F5:\"G6\",F6:\"G7\",F7:\"G8\",F8:null,G1:\"H2\",G2:\"H3\",G3:\"H4\",G4:\"H5\",G5:\"H6\",G6:\"H7\",G7:\"H8\",G8:null,H1:null,H2:null,H3:null,H4:null,H5:null,H6:null,H7:null,H8:null},DOWN_LEFT:{A1:null,A2:null,A3:null,A4:null,A5:null,A6:null,A7:null,A8:null,B1:null,B2:\"A1\",B3:\"A2\",B4:\"A3\",B5:\"A4\",B6:\"A5\",B7:\"A6\",B8:\"A7\",C1:null,C2:\"B1\",C3:\"B2\",C4:\"B3\",C5:\"B4\",C6:\"B5\",C7:\"B6\",C8:\"B7\",D1:null,D2:\"C1\",D3:\"C2\",D4:\"C3\",D5:\"C4\",D6:\"C5\",D7:\"C6\",D8:\"C7\",E1:null,E2:\"D1\",E3:\"D2\",E4:\"D3\",E5:\"D4\",E6:\"D5\",E7:\"D6\",E8:\"D7\",F1:null,F2:\"E1\",F3:\"E2\",F4:\"E3\",F5:\"E4\",F6:\"E5\",F7:\"E6\",F8:\"E7\",G1:null,G2:\"F1\",G3:\"F2\",G4:\"F3\",G5:\"F4\",G6:\"F5\",G7:\"F6\",G8:\"F7\",H1:null,H2:\"G1\",H3:\"G2\",H4:\"G3\",H5:\"G4\",H6:\"G5\",H7:\"G6\",H8:\"G7\"}},C=[[0,0,0,0,0,0,0,0],[5,5,5,5,5,5,5,5],[1,1,2,3,3,2,1,1],[.5,.5,1,2.5,2.5,1,.5,.5],[0,0,0,2,2,0,0,0],[.5,0,1,0,0,1,0,.5],[.5,0,0,-2,-2,0,0,.5],[0,0,0,0,0,0,0,0]],P=[[-4,-3,-2,-2,-2,-2,-3,-4],[-3,-2,0,0,0,0,-2,-3],[-2,0,1,1.5,1.5,1,0,-2],[-2,.5,1.5,2,2,1.5,.5,-2],[-2,0,1.5,2,2,1.5,0,-2],[-2,.5,1,1.5,1.5,1,.5,-2],[-3,-2,0,.5,.5,0,-2,-3],[-4,-3,-2,-2,-2,-2,-3,-4]],p=[[-2,-1,-1,-1,-1,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,1,1,.5,0,-1],[-1,.5,.5,1,1,.5,.5,-1],[-1,0,1,1,1,1,0,-1],[-1,1,1,1,1,1,1,-1],[-1,.5,0,0,0,0,.5,-1],[-2,-1,-1,-1,-1,-1,-1,-2]],E=[[0,0,0,0,0,0,0,0],[.5,1,1,1,1,1,1,.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[0,0,0,.5,.5,0,0,0]],B=[[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-2,-3,-3,-4,-4,-3,-3,-2],[-1,-2,-2,-2,-2,-2,-2,-1],[2,2,0,0,0,0,2,2],[2,3,1,0,0,1,3,2]],F=[[-2,-1,-1,-.5,-.5,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,.5,.5,.5,0,-1],[-.5,0,.5,.5,.5,.5,0,-.5],[0,0,.5,.5,.5,.5,0,-.5],[-1,.5,.5,.5,.5,.5,0,-1],[-1,0,.5,0,0,0,0,-1],[-2,-1,-1,-.5,-.5,-1,-1,-2]],G={P:C.slice().reverse(),p:C,N:P.slice().reverse(),n:P,B:p.slice().reverse(),b:p,R:E.slice().reverse(),r:E,K:B.slice().reverse(),k:B,Q:F.slice().reverse(),q:F};function D(t){return f.UP[t]}function A(t){return f.DOWN[t]}function H(t){return f.LEFT[t]}function b(t){return f.RIGHT[t]}function d(t){return f.UP_LEFT[t]}function v(t){return f.UP_RIGHT[t]}function k(t){return f.DOWN_LEFT[t]}function y(t){return f.DOWN_RIGHT[t]}function w(t){const e=d(t);return e?D(e):null}function O(t){const e=d(t);return e?H(e):null}function L(t){const e=v(t);return e?D(e):null}function m(t){const e=v(t);return e?b(e):null}function M(t){const e=k(t);return e?A(e):null}function K(t){const e=k(t);return e?H(e):null}function N(t){const e=y(t);return e?A(e):null}function S(t){const e=y(t);return e?b(e):null}function j(t,e){return e===c?f.UP[t]:f.DOWN[t]}function _(t,e){return e===c?f.UP_LEFT[t]:f.DOWN_RIGHT[t]}function W(t,e){return e===c?f.UP_RIGHT[t]:f.DOWN_LEFT[t]}function U(t,e){return e===c?f.DOWN_LEFT[t]:f.UP_RIGHT[t]}function R(t,e){return e===c?f.DOWN_RIGHT[t]:f.UP_LEFT[t]}function T(t){return{k:10,q:9,r:5,b:3,n:3,p:1}[t.toLowerCase()]||0}function I(t){return\"string\"==typeof t&&t.match(\"^[a-hA-H]{1}[1-8]{1}$\")}const x=-1e3,Q=1e3;class q{constructor(t=JSON.parse(JSON.stringify(g))){if(\"object\"==typeof t)this.configuration=Object.assign({},h,t);else{if(\"string\"!=typeof t)throw new Error(`Unknown configuration type ${typeof config}.`);this.configuration=Object.assign({},h,function(t=\"\"){const[e,i,s,l,a,u]=t.split(\" \"),h={pieces:Object.fromEntries(e.split(\"/\").flatMap((t,e)=>{let i=0;return t.split(\"\").reduce((t,s)=>{const r=s.match(/k|b|q|n|p|r/i);r&&(t.push([`${n[i]}${o[7-e]}`,r[0]]),i+=1);const c=s.match(/[1-8]/);return c&&(i+=Number(c)),t},[])}))};return h.turn=\"b\"===i?r:c,h.castling={whiteLong:!1,whiteShort:!1,blackLong:!1,blackShort:!1},s.includes(\"K\")&&(h.castling.whiteShort=!0),s.includes(\"k\")&&(h.castling.blackShort=!0),s.includes(\"Q\")&&(h.castling.whiteLong=!0),s.includes(\"q\")&&(h.castling.blackLong=!0),I(l)&&(h.enPassant=l.toUpperCase()),h.halfMove=parseInt(a),h.fullMove=parseInt(u),h}(t))}this.configuration.castling||(this.configuration.castling={whiteShort:!0,blackShort:!0,whiteLong:!0,blackLong:!0}),this.history=[]}getAttackingFields(t=this.getPlayingColor()){let e=[];for(const i in this.configuration.pieces){const n=this.getPiece(i);this.getPieceColor(n)===t&&(e=[...e,...this.getPieceMoves(n,i)])}return e}isAttackingKing(t=this.getPlayingColor()){let e=null;for(const i in this.configuration.pieces){const n=this.getPiece(i);if(this.isKing(n)&&this.getPieceColor(n)!==t){e=i;break}}return this.isPieceUnderAttack(e)}isPieceUnderAttack(t){const e=this.getPieceOnLocationColor(t),i=this.getEnemyColor(e);let n=!1,o=t,s=0;for(;D(o)&&!n;){o=D(o),s++;const t=this.getPiece(o);if(t&&this.getPieceColor(t)===i&&(this.isRook(t)||this.isQueen(t)||this.isKing(t)&&1===s)&&(n=!0),t)break}for(o=t,s=0;A(o)&&!n;){o=A(o),s++;const t=this.getPiece(o);if(t&&this.getPieceColor(t)===i&&(this.isRook(t)||this.isQueen(t)||this.isKing(t)&&1===s)&&(n=!0),t)break}for(o=t,s=0;H(o)&&!n;){o=H(o),s++;const t=this.getPiece(o);if(t&&this.getPieceColor(t)===i&&(this.isRook(t)||this.isQueen(t)||this.isKing(t)&&1===s)&&(n=!0),t)break}for(o=t,s=0;b(o)&&!n;){o=b(o),s++;const t=this.getPiece(o);if(t&&this.getPieceColor(t)===i&&(this.isRook(t)||this.isQueen(t)||this.isKing(t)&&1===s)&&(n=!0),t)break}for(o=t,s=0;W(o,e)&&!n;){o=W(o,e),s++;const t=this.getPiece(o);if(t&&this.getPieceColor(t)===i&&(this.isBishop(t)||this.isQueen(t)||1===s&&(this.isKing(t)||this.isPawn(t)))&&(n=!0),t)break}for(o=t,s=0;_(o,e)&&!n;){o=_(o,e),s++;const t=this.getPiece(o);if(t&&this.getPieceColor(t)===i&&(this.isBishop(t)||this.isQueen(t)||1===s&&(this.isKing(t)||this.isPawn(t)))&&(n=!0),t)break}for(o=t,s=0;R(o,e)&&!n;){o=R(o,e),s++;const t=this.getPiece(o);if(t&&this.getPieceColor(t)===i&&(this.isBishop(t)||this.isQueen(t)||this.isKing(t)&&1===s)&&(n=!0),t)break}for(o=t,s=0;U(o,e)&&!n;){o=U(o,e),s++;const t=this.getPiece(o);if(t&&this.getPieceColor(t)===i&&(this.isBishop(t)||this.isQueen(t)||this.isKing(t)&&1===s)&&(n=!0),t)break}o=L(t);let r=this.getPiece(o);return r&&this.getPieceColor(r)===i&&this.isKnight(r)&&(n=!0),o=m(t),r=this.getPiece(o),r&&this.getPieceColor(r)===i&&this.isKnight(r)&&(n=!0),o=O(t),r=this.getPiece(o),r&&this.getPieceColor(r)===i&&this.isKnight(r)&&(n=!0),o=w(t),r=this.getPiece(o),r&&this.getPieceColor(r)===i&&this.isKnight(r)&&(n=!0),o=M(t),r=this.getPiece(o),r&&this.getPieceColor(r)===i&&this.isKnight(r)&&(n=!0),o=K(t),r=this.getPiece(o),r&&this.getPieceColor(r)===i&&this.isKnight(r)&&(n=!0),o=N(t),r=this.getPiece(o),r&&this.getPieceColor(r)===i&&this.isKnight(r)&&(n=!0),o=S(t),r=this.getPiece(o),r&&this.getPieceColor(r)===i&&this.isKnight(r)&&(n=!0),n}hasPlayingPlayerCheck(){return this.isAttackingKing(this.getNonPlayingColor())}hasNonPlayingPlayerCheck(){return this.isAttackingKing(this.getPlayingColor())}getLowestValuePieceAttackingLocation(t,e=this.getPlayingColor()){let i=null;for(const n in this.configuration.pieces){const o=this.getPiece(n);this.getPieceColor(o)===e&&this.getPieceMoves(o,n).map(e=>{e===t&&(null===i||T(o)<i)&&(i=T(o))})}return i}getMoves(t=this.getPlayingColor(),e=null){const i={};let n=0;for(const e in this.configuration.pieces){const o=this.getPiece(e);if(this.getPieceColor(o)===t){const t=this.getPieceMoves(o,e);t.length&&n++,Object.assign(i,{[e]:t})}}const o=this.getAttackingFields(this.getNonPlayingColor());if(this.isLeftCastlingPossible(o)&&(this.isPlayingWhite()&&i.E1.push(\"C1\"),this.isPlayingBlack()&&i.E8.push(\"C8\")),this.isRightCastlingPossible(o)&&(this.isPlayingWhite()&&i.E1.push(\"G1\"),this.isPlayingBlack()&&i.E8.push(\"G8\")),e&&n>e)return i;const s={};for(const t in i)i[t].map(e=>{const i={pieces:Object.assign({},this.configuration.pieces),castling:Object.assign({},this.configuration.castling)},n=new q(i);n.move(t,e),(this.isPlayingWhite()&&!n.isAttackingKing(r)||this.isPlayingBlack()&&!n.isAttackingKing(c))&&(s[t]||(s[t]=[]),s[t].push(e))});return Object.keys(s).length||(this.configuration.isFinished=!0,this.hasPlayingPlayerCheck()&&(this.configuration.checkMate=!0)),s}isLeftCastlingPossible(t){if(this.isPlayingWhite()&&!this.configuration.castling.whiteLong)return!1;if(this.isPlayingBlack()&&!this.configuration.castling.blackLong)return!1;let e=null;if(this.isPlayingWhite()&&\"K\"===this.getPiece(\"E1\")&&\"R\"===this.getPiece(\"A1\")&&!t.includes(\"E1\")?e=\"E1\":this.isPlayingBlack()&&\"k\"===this.getPiece(\"E8\")&&\"r\"===this.getPiece(\"A8\")&&!t.includes(\"E8\")&&(e=\"E8\"),!e)return!1;let i=H(e);return!this.getPiece(i)&&!t.includes(i)&&(i=H(i),!this.getPiece(i)&&!t.includes(i)&&(i=H(i),!this.getPiece(i)))}isRightCastlingPossible(t){if(this.isPlayingWhite()&&!this.configuration.castling.whiteShort)return!1;if(this.isPlayingBlack()&&!this.configuration.castling.blackShort)return!1;let e=null;if(this.isPlayingWhite()&&\"K\"===this.getPiece(\"E1\")&&\"R\"===this.getPiece(\"H1\")&&!t.includes(\"E1\")?e=\"E1\":this.isPlayingBlack()&&\"k\"===this.getPiece(\"E8\")&&\"r\"===this.getPiece(\"H8\")&&!t.includes(\"E8\")&&(e=\"E8\"),!e)return!1;let i=b(e);return!this.getPiece(i)&&!t.includes(i)&&(i=b(i),!this.getPiece(i)&&!t.includes(i))}getPieceMoves(t,e){return this.isPawn(t)?this.getPawnMoves(t,e):this.isKnight(t)?this.getKnightMoves(t,e):this.isRook(t)?this.getRookMoves(t,e):this.isBishop(t)?this.getBishopMoves(t,e):this.isQueen(t)?this.getQueenMoves(t,e):this.isKing(t)?this.getKingMoves(t,e):[]}isPawn(t){return\"P\"===t.toUpperCase()}isKnight(t){return\"N\"===t.toUpperCase()}isRook(t){return\"R\"===t.toUpperCase()}isBishop(t){return\"B\"===t.toUpperCase()}isQueen(t){return\"Q\"===t.toUpperCase()}isKing(t){return\"K\"===t.toUpperCase()}getPawnMoves(t,e){const i=[],n=this.getPieceColor(t);let o=j(e,n);return o&&!this.getPiece(o)&&(i.push(o),o=j(o,n),function(t,e){if(t===c&&\"2\"===e[1])return!0;if(t===r&&\"7\"===e[1])return!0;return!1}(n,e)&&o&&!this.getPiece(o)&&i.push(o)),o=_(e,n),o&&(this.getPiece(o)&&this.getPieceOnLocationColor(o)!==n||o===this.configuration.enPassant)&&i.push(o),o=W(e,n),o&&(this.getPiece(o)&&this.getPieceOnLocationColor(o)!==n||o===this.configuration.enPassant)&&i.push(o),i}getKnightMoves(t,e){const i=[],n=this.getPieceColor(t);let o=L(e);return o&&this.getPieceOnLocationColor(o)!==n&&i.push(o),o=m(e),o&&this.getPieceOnLocationColor(o)!==n&&i.push(o),o=w(e),o&&this.getPieceOnLocationColor(o)!==n&&i.push(o),o=O(e),o&&this.getPieceOnLocationColor(o)!==n&&i.push(o),o=K(e),o&&this.getPieceOnLocationColor(o)!==n&&i.push(o),o=M(e),o&&this.getPieceOnLocationColor(o)!==n&&i.push(o),o=S(e),o&&this.getPieceOnLocationColor(o)!==n&&i.push(o),o=N(e),o&&this.getPieceOnLocationColor(o)!==n&&i.push(o),i}getRookMoves(t,e){const i=[],n=this.getPieceColor(t);let o=e;for(;D(o);){o=D(o);const t=this.getPieceOnLocationColor(o);if(this.getPieceOnLocationColor(o)!==n&&i.push(o),t)break}for(o=e;A(o);){o=A(o);const t=this.getPieceOnLocationColor(o);if(this.getPieceOnLocationColor(o)!==n&&i.push(o),t)break}for(o=e;b(o);){o=b(o);const t=this.getPieceOnLocationColor(o);if(this.getPieceOnLocationColor(o)!==n&&i.push(o),t)break}for(o=e;H(o);){o=H(o);const t=this.getPieceOnLocationColor(o);if(this.getPieceOnLocationColor(o)!==n&&i.push(o),t)break}return i}getBishopMoves(t,e){const i=[],n=this.getPieceColor(t);let o=e;for(;d(o);){o=d(o);const t=this.getPieceOnLocationColor(o);if(this.getPieceOnLocationColor(o)!==n&&i.push(o),t)break}for(o=e;v(o);){o=v(o);const t=this.getPieceOnLocationColor(o);if(this.getPieceOnLocationColor(o)!==n&&i.push(o),t)break}for(o=e;k(o);){o=k(o);const t=this.getPieceOnLocationColor(o);if(this.getPieceOnLocationColor(o)!==n&&i.push(o),t)break}for(o=e;y(o);){o=y(o);const t=this.getPieceOnLocationColor(o);if(this.getPieceOnLocationColor(o)!==n&&i.push(o),t)break}return i}getQueenMoves(t,e){return[...this.getRookMoves(t,e),...this.getBishopMoves(t,e)]}getKingMoves(t,e){const i=[],n=this.getPieceColor(t);let o=e;return o=D(o),o&&this.getPieceOnLocationColor(o)!==n&&i.push(o),o=e,o=b(o),o&&this.getPieceOnLocationColor(o)!==n&&i.push(o),o=e,o=A(o),o&&this.getPieceOnLocationColor(o)!==n&&i.push(o),o=e,o=H(o),o&&this.getPieceOnLocationColor(o)!==n&&i.push(o),o=e,o=d(o),o&&this.getPieceOnLocationColor(o)!==n&&i.push(o),o=e,o=v(o),o&&this.getPieceOnLocationColor(o)!==n&&i.push(o),o=e,o=k(o),o&&this.getPieceOnLocationColor(o)!==n&&i.push(o),o=e,o=y(o),o&&this.getPieceOnLocationColor(o)!==n&&i.push(o),i}getPieceColor(t){return t.toUpperCase()===t?c:r}getPieceOnLocationColor(t){const e=this.getPiece(t);return e?e.toUpperCase()===e?c:r:null}getPiece(t){return this.configuration.pieces[t]}setPiece(t,e){if(!function(t){return Object.values(s).includes(t)}(e))throw new Error(\"Invalid piece \"+e);if(!I(t))throw new Error(\"Invalid location \"+t);this.configuration.pieces[t.toUpperCase()]=e}removePiece(t){if(!I(t))throw new Error(\"Invalid location \"+t);delete this.configuration.pieces[t.toUpperCase()]}isEmpty(t){if(!I(t))throw new Error(\"Invalid location \"+t);return!this.configuration.pieces[t.toUpperCase()]}getEnemyColor(t){return t===c?r:c}getPlayingColor(){return this.configuration.turn}getNonPlayingColor(){return this.isPlayingWhite()?r:c}isPlayingWhite(){return this.configuration.turn===c}isPlayingBlack(){return this.configuration.turn===r}addMoveToHistory(t,e){this.history.push({from:t,to:e,configuration:JSON.parse(JSON.stringify(this.configuration))})}move(t,e){const i=this.getPiece(t),n=this.getPiece(e);if(!i)throw new Error(\"There is no piece at \"+t);var o,s;if(Object.assign(this.configuration.pieces,{[e]:i}),delete this.configuration.pieces[t],this.isPlayingWhite()&&this.isPawn(i)&&\"8\"===e[1]&&Object.assign(this.configuration.pieces,{[e]:\"Q\"}),this.isPlayingBlack()&&this.isPawn(i)&&\"1\"===e[1]&&Object.assign(this.configuration.pieces,{[e]:\"q\"}),this.isPawn(i)&&e===this.configuration.enPassant&&delete this.configuration.pieces[(o=e,s=this.getPlayingColor(),s===c?f.DOWN[o]:f.UP[o])],this.isPawn(i)&&this.isPlayingWhite()&&\"2\"===t[1]&&\"4\"===e[1]?this.configuration.enPassant=t[0]+\"3\":this.isPawn(i)&&this.isPlayingBlack()&&\"7\"===t[1]&&\"5\"===e[1]?this.configuration.enPassant=t[0]+\"6\":this.configuration.enPassant=null,\"E1\"===t&&Object.assign(this.configuration.castling,{whiteLong:!1,whiteShort:!1}),\"E8\"===t&&Object.assign(this.configuration.castling,{blackLong:!1,blackShort:!1}),\"A1\"===t&&Object.assign(this.configuration.castling,{whiteLong:!1}),\"H1\"===t&&Object.assign(this.configuration.castling,{whiteShort:!1}),\"A8\"===t&&Object.assign(this.configuration.castling,{blackLong:!1}),\"H8\"===t&&Object.assign(this.configuration.castling,{blackShort:!1}),this.isKing(i)){if(\"E1\"===t&&\"C1\"===e)return this.move(\"A1\",\"D1\");if(\"E8\"===t&&\"C8\"===e)return this.move(\"A8\",\"D8\");if(\"E1\"===t&&\"G1\"===e)return this.move(\"H1\",\"F1\");if(\"E8\"===t&&\"G8\"===e)return this.move(\"H8\",\"F8\")}this.configuration.turn=this.isPlayingWhite()?r:c,this.isPlayingWhite()&&this.configuration.fullMove++,this.configuration.halfMove++,(n||this.isPawn(i))&&(this.configuration.halfMove=0)}exportJson(){return{moves:this.getMoves(),pieces:this.configuration.pieces,turn:this.configuration.turn,isFinished:this.configuration.isFinished,check:this.hasPlayingPlayerCheck(),checkMate:this.configuration.checkMate,castling:this.configuration.castling,enPassant:this.configuration.enPassant,halfMove:this.configuration.halfMove,fullMove:this.configuration.fullMove}}calculateAiMove(t){return this.calculateAiMoves(t)[0]}calculateAiMoves(t){if(t=parseInt(t),!l.includes(t))throw new Error(`Invalid level ${t}. You can choose ${l.join(\",\")}`);this.shouldIncreaseLevel()&&t++;const e=[],i=this.calculateScore(this.getPlayingColor()),n=this.getMoves();for(const o in n)n[o].map(n=>{const s=this.getTestBoard(),r=Boolean(s.getPiece(n));s.move(o,n),e.push({from:o,to:n,score:s.testMoveScores(this.getPlayingColor(),t,r,r?s.calculateScore(this.getPlayingColor()):i,n).score+s.calculateScoreByPiecesLocation(this.getPlayingColor())+Math.floor(Math.random()*(this.configuration.halfMove>10?this.configuration.halfMove-10:1)*10)/10})});return e.sort((t,e)=>t.score<e.score?1:t.score>e.score?-1:0),e}shouldIncreaseLevel(){return this.getIngamePiecesValue()<50}getIngamePiecesValue(){let t=0;for(const e in this.configuration.pieces){t+=T(this.getPiece(e))}return t}getTestBoard(){const t={pieces:Object.assign({},this.configuration.pieces),castling:Object.assign({},this.configuration.castling),turn:this.configuration.turn,enPassant:this.configuration.enPassant};return new q(t)}testMoveScores(t,e,i,n,o,s=1){let r=null;if(s<u[e]&&this.hasPlayingPlayerCheck()?r=this.getMoves(this.getPlayingColor()):(s<a[e]||i&&s<u[e])&&(r=this.getMoves(this.getPlayingColor(),5)),this.configuration.isFinished)return{score:this.calculateScore(t)+(this.getPlayingColor()===t?s:-s),max:!0};if(!r){if(null!==n)return{score:n,max:!1};return{score:this.calculateScore(t),max:!1}}let c=this.getPlayingColor()===t?x:Q,l=!1;for(const i in r)l||r[i].map(o=>{if(l)return;const r=this.getTestBoard(),a=Boolean(r.getPiece(o));if(r.move(i,o),r.hasNonPlayingPlayerCheck())return;const u=r.testMoveScores(t,e,a,a?r.calculateScore(t):n,o,s+1);u.max&&(l=!0),c=this.getPlayingColor()===t?Math.max(c,u.score):Math.min(c,u.score)});return{score:c,max:!1}}calculateScoreByPiecesLocation(t=this.getPlayingColor()){const e={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7};let i=0;for(const n in this.configuration.pieces){const o=this.getPiece(n);if(G[o]){const s=G[o][n[1]-1][e[n[0]]];i+=.5*(this.getPieceColor(o)===t?s:-s)}}return i}calculateScore(t=this.getPlayingColor()){let e=0;if(this.configuration.checkMate)return this.getPlayingColor()===t?x:Q;if(this.configuration.isFinished)return this.getPlayingColor()===t?Q:x;for(const i in this.configuration.pieces){const n=this.getPiece(i);this.getPieceColor(n)===t?e+=10*T(n):e-=10*T(n)}return e}}class ${constructor(t){this.board=new q(t)}move(t,e){t=t.toUpperCase(),e=e.toUpperCase();const i=this.board.getMoves();if(!i[t]||!i[t].includes(e))throw new Error(`Invalid move from ${t} to ${e} for ${this.board.getPlayingColor()}`);return this.board.addMoveToHistory(t,e),this.board.move(t,e),{[t]:e}}moves(t=null){return(t?this.board.getMoves()[t.toUpperCase()]:this.board.getMoves())||[]}setPiece(t,e){this.board.setPiece(t,e)}removePiece(t){this.board.removePiece(t)}aiMove(t=2){const e=this.board.calculateAiMove(t);return this.move(e.from,e.to)}getHistory(t=!1){return t?this.board.history.reverse():this.board.history}printToConsole(){!function(t){process.stdout.write(\"\\n\");let e=c;Object.assign([],o).reverse().map(i=>{process.stdout.write(\"\"+i),n.map(n=>{switch(t.pieces[`${n}${i}`]){case\"K\":process.stdout.write(\"♚\");break;case\"Q\":process.stdout.write(\"♛\");break;case\"R\":process.stdout.write(\"♜\");break;case\"B\":process.stdout.write(\"♝\");break;case\"N\":process.stdout.write(\"♞\");break;case\"P\":process.stdout.write(\"♟\");break;case\"k\":process.stdout.write(\"♔\");break;case\"q\":process.stdout.write(\"♕\");break;case\"r\":process.stdout.write(\"♖\");break;case\"b\":process.stdout.write(\"♗\");break;case\"n\":process.stdout.write(\"♘\");break;case\"p\":process.stdout.write(\"♙\");break;default:process.stdout.write(e===c?\"█\":\"░\")}e=e===c?r:c}),e=e===c?r:c,process.stdout.write(\"\\n\")}),process.stdout.write(\" \"),n.map(t=>{process.stdout.write(\"\"+t)}),process.stdout.write(\"\\n\")}(this.board.configuration)}exportJson(){return this.board.exportJson()}exportFEN(){return function(t){let e=\"\";Object.assign([],o).reverse().map(i=>{let o=0;i<8&&(e+=\"/\"),n.map(n=>{const s=t.pieces[`${n}${i}`];s?(o&&(e+=o.toString(),o=0),e+=s):o++}),e+=\"\"+(o||\"\")}),e+=t.turn===c?\" w \":\" b \";const{whiteShort:i,whiteLong:s,blackLong:r,blackShort:l}=t.castling;return s||i||r||l?(i&&(e+=\"K\"),s&&(e+=\"Q\"),l&&(e+=\"k\"),r&&(e+=\"q\")):e+=\"-\",e+=\" \"+(t.enPassant?t.enPassant.toLowerCase():\"-\"),e+=\" \"+t.halfMove,e+=\" \"+t.fullMove,e}(this.board.configuration)}}function J(t){if(!t)throw new Error(\"Configuration param required.\");return new $(t).moves()}function V(t){if(!t)throw new Error(\"Configuration param required.\");return new $(t).exportJson()}function Y(t){if(!t)throw new Error(\"Configuration param required.\");return new $(t).exportFEN()}function z(t,e,i){if(!t)throw new Error(\"Configuration param required.\");const n=new $(t);return n.move(e,i),\"object\"==typeof t?n.exportJson():n.exportFEN()}function X(t,e=2){if(!t)throw new Error(\"Configuration param required.\");const i=new $(t).board.calculateAiMove(e);return{[i.from]:i.to}}}])}));\n\n//# sourceURL=webpack://chess/./node_modules/js-chess-engine/dist/js-chess-engine.js?");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":
/*!****************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js ***!
  \****************************************************************************/
/***/ ((module) => {

"use strict";
eval("\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};\n\n//# sourceURL=webpack://chess/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js?");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/insertBySelector.js":
/*!********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertBySelector.js ***!
  \********************************************************************/
/***/ ((module) => {

"use strict";
eval("\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;\n\n//# sourceURL=webpack://chess/./node_modules/style-loader/dist/runtime/insertBySelector.js?");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/insertStyleElement.js":
/*!**********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/insertStyleElement.js ***!
  \**********************************************************************/
/***/ ((module) => {

"use strict";
eval("\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;\n\n//# sourceURL=webpack://chess/./node_modules/style-loader/dist/runtime/insertStyleElement.js?");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js ***!
  \**********************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce =  true ? __webpack_require__.nc : 0;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;\n\n//# sourceURL=webpack://chess/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js?");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/styleDomAPI.js":
/*!***************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleDomAPI.js ***!
  \***************************************************************/
/***/ ((module) => {

"use strict";
eval("\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;\n\n//# sourceURL=webpack://chess/./node_modules/style-loader/dist/runtime/styleDomAPI.js?");

/***/ }),

/***/ "./node_modules/style-loader/dist/runtime/styleTagTransform.js":
/*!*********************************************************************!*\
  !*** ./node_modules/style-loader/dist/runtime/styleTagTransform.js ***!
  \*********************************************************************/
/***/ ((module) => {

"use strict";
eval("\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;\n\n//# sourceURL=webpack://chess/./node_modules/style-loader/dist/runtime/styleTagTransform.js?");

/***/ }),

/***/ "./src/components/Board.js":
/*!*********************************!*\
  !*** ./src/components/Board.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _pieces_king__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./pieces/king */ \"./src/components/pieces/king.js\");\n/* harmony import */ var _pieces_Pawn__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./pieces/Pawn */ \"./src/components/pieces/Pawn.js\");\n/* harmony import */ var _pieces_Knight__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./pieces/Knight */ \"./src/components/pieces/Knight.js\");\n/* harmony import */ var _pieces_Piece__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pieces/Piece */ \"./src/components/pieces/Piece.js\");\n/* harmony import */ var _pieces_Rook__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./pieces/Rook */ \"./src/components/pieces/Rook.js\");\n/* harmony import */ var _pieces_Queen__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./pieces/Queen */ \"./src/components/pieces/Queen.js\");\n/* harmony import */ var _pieces_Bishop__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./pieces/Bishop */ \"./src/components/pieces/Bishop.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass Board{\r\n  constructor(gameController){\r\n    this.board = [];\r\n    this.controlledSquares = {white: [], black: []};\r\n    this.boardDiv;\r\n    this.gameController = gameController;\r\n    this.boardRect;\r\n  }\r\n\r\n  createBoard(){\r\n    this.boardDiv = document.createElement(\"div\");\r\n    this.boardDiv.setAttribute(\"class\", \"board\");\r\n\r\n    window.addEventListener(\"resize\", ()=>{\r\n      this.boardRect = this.boardDiv.getBoundingClientRect();\r\n      this.drawPieces();\r\n      for (const e of document.querySelectorAll(\".square-move\")) {\r\n        e.remove()\r\n      }\r\n      \r\n      for (const e of document.querySelectorAll(\".move-highlight\")) {\r\n        e.remove()\r\n      }\r\n    })\r\n    //used at the end of the game for displaying who won\r\n    this.gameMessage = document.createElement(\"div\");\r\n    this.gameMessage.setAttribute(\"class\", \"gameMessage\");\r\n    this.title = document.createElement(\"div\");\r\n    this.title.setAttribute(\"class\", \"gameMsgTitle\");\r\n    this.subtitle = document.createElement(\"div\");\r\n    this.subtitle.setAttribute(\"class\", \"gameMsgSubtitle\");\r\n    //exit btn\r\n    this.times = document.createElement(\"div\");\r\n    this.times.setAttribute(\"class\", \"exit-modal\");\r\n    this.times.innerHTML = \"<i class='fas fa-times'></i>\"\r\n    this.times.onclick = ()=>{\r\n      this.gameMessage.style.display = \"none\";\r\n    }\r\n    \r\n    this.gameMessage.append(this.times, this.title, this.subtitle)\r\n    this.boardDiv.appendChild(this.gameMessage)\r\n    \r\n    this.drawBoard();\r\n\r\n    document.querySelector(\".container\").append(this.boardDiv);\r\n    this.boardRect = this.boardDiv.getBoundingClientRect();\r\n  }\r\n\r\n  drawBoard(){\r\n    //draw board in html\r\n    for (let i = 0; i <= 7; i++) {\r\n      const row = document.createElement(\"div\");\r\n      row.setAttribute(\"class\", \"row\");\r\n      this.board.push([]);\r\n\r\n      for (let j = 0; j <= 7; j++) {\r\n\r\n        const square = document.createElement('div');\r\n        square.setAttribute(\"class\", `${j}${i} square`);\r\n        square.style.background = ((j+1+i+1)%2==0) ? \"#F0D29E\" : \"#996542\";\r\n\r\n        this.board[i].push(\"\");\r\n        row.appendChild(square);\r\n      }\r\n\r\n      this.boardDiv.appendChild(row);\r\n    }\r\n  }\r\n\r\n  drawPieces(){\r\n    this.board.forEach(arr=>{\r\n      arr.forEach(e=>{\r\n        if(e.type===\"r\" || e.type===\"R\" || e.type===\"n\" || e.type===\"N\" || e.type===\"b\" || e.type===\"B\" \r\n        || e.type===\"k\" || e.type===\"K\" || e.type===\"k\" || e.type===\"q\" || e.type===\"Q\" || e.type===\"p\" || e.type===\"P\"){\r\n          e.pieceDiv.style.left = e.pos.x*(this.boardRect.width/8) + \"px\";\r\n          e.pieceDiv.style.top = e.pos.y*(this.boardRect.height/8) + \"px\";\r\n          this.boardDiv.appendChild(e.pieceDiv);\r\n          if(!e.isAlive){\r\n            e.pieceDiv.remove()\r\n          }\r\n        }\r\n      })\r\n    })\r\n    this.getControlledSquares();\r\n  }\r\n\r\n  removePieces(){\r\n    this.board.forEach(arr=>{\r\n      arr.forEach(e=>{\r\n        if(!e.pieceDiv) return;\r\n        if(e!==\"-\") e.pieceDiv.remove();\r\n      })\r\n    })\r\n  }\r\n\r\n  readFEN(fenStr){\r\n    this.board = [];\r\n\r\n    let fenArray = fenStr.split(\"/\");\r\n    let fenArrayLast = fenArray[7].split(\" \").slice(0,1);\r\n    let fenInfo = fenArray[7].split(\" \").slice(1);\r\n    fenArray.pop();\r\n    fenArray.push(...fenArrayLast);\r\n    \r\n    //create empty board\r\n    for (let i = 0; i <= 7; i++) {\r\n      this.board.push([]);\r\n    }\r\n\r\n    //fill board with pieces\r\n    let rowNum = 0;\r\n    fenArray.forEach(row=>{\r\n      [...row].forEach(e=>{\r\n        if(this.board[rowNum].length>8) return;\r\n\r\n        if(e>0 && e<9){\r\n          for (let i = 0; i < e; i++) {\r\n            this.board[rowNum].push('-');\r\n          }\r\n        }else{\r\n          if(e.toLowerCase()==\"k\"){\r\n            let newPiece = new _pieces_king__WEBPACK_IMPORTED_MODULE_0__[\"default\"](e, this.board[rowNum].length, rowNum, (e.toLowerCase()==e) ? false : true);\r\n            newPiece.createPiece(this);\r\n            \r\n          }else if(e.toLowerCase()==\"p\"){\r\n            let newPiece = new _pieces_Pawn__WEBPACK_IMPORTED_MODULE_1__[\"default\"](e, this.board[rowNum].length, rowNum, (e.toLowerCase()==e) ? false : true);\r\n            newPiece.createPiece(this);\r\n            \r\n          }else if(e.toLowerCase()==\"n\"){\r\n            let newPiece = new _pieces_Knight__WEBPACK_IMPORTED_MODULE_2__[\"default\"](e, this.board[rowNum].length, rowNum, (e.toLowerCase()==e) ? false : true);\r\n            newPiece.createPiece(this);\r\n            \r\n          }else if(e.toLowerCase()==\"r\"){\r\n            let newPiece = new _pieces_Rook__WEBPACK_IMPORTED_MODULE_4__[\"default\"](e, this.board[rowNum].length, rowNum, (e.toLowerCase()==e) ? false : true);\r\n            newPiece.createPiece(this);\r\n            \r\n          }else if(e.toLowerCase()==\"b\"){\r\n            let newPiece = new _pieces_Bishop__WEBPACK_IMPORTED_MODULE_6__[\"default\"](e, this.board[rowNum].length, rowNum, (e.toLowerCase()==e) ? false : true);\r\n            newPiece.createPiece(this);\r\n            \r\n          }else if(e.toLowerCase()==\"q\"){\r\n            let newPiece = new _pieces_Queen__WEBPACK_IMPORTED_MODULE_5__[\"default\"](e, this.board[rowNum].length, rowNum, (e.toLowerCase()==e) ? false : true);\r\n            newPiece.createPiece(this);\r\n            \r\n          }else{\r\n            let newPiece = new _pieces_Piece__WEBPACK_IMPORTED_MODULE_3__[\"default\"](e, this.board[rowNum].length, rowNum, (e.toLowerCase()==e) ? false : true);\r\n            newPiece.createPiece(this);\r\n          }\r\n        }\r\n      })\r\n      rowNum++;\r\n    })\r\n\r\n    if(fenInfo.length<=0) return;\r\n    // save fen info\r\n    this.gameController.whiteToMove = (fenInfo[0]=='w') ? true : false;\r\n    \r\n    //castlingInfo\r\n    let fenCastle = fenInfo[1].split('');\r\n    let rooks = this.gameController.findRooks(this);\r\n    rooks.white.forEach(e=>e.wasMoved=true)\r\n    rooks.black.forEach(e=>e.wasMoved=true)\r\n\r\n    fenCastle.forEach(e=>{\r\n      switch (e) {\r\n        case \"K\":\r\n          if(rooks.white[1]){\r\n            rooks.white[1].wasMoved = false;\r\n          }\r\n          break;\r\n        case \"Q\":\r\n          if(rooks.white[0]){\r\n            rooks.white[0].wasMoved = false;\r\n          }\r\n          break;\r\n        case \"k\":\r\n          if(rooks.black[1]){\r\n            rooks.black[1].wasMoved = false;\r\n          }\r\n          break;\r\n        case \"q\":\r\n          if(rooks.black[0]){\r\n            rooks.black[0].wasMoved = false;\r\n          }\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    })\r\n\r\n    //en passant square\r\n    if(fenInfo[2]!==\"-\"){\r\n      let letterToNum = [\"a\", \"b\", \"c\", \"d\" ,\"e\" ,\"f\", \"g\", \"h\"]\r\n      this.gameController.enPassantTargetSquare = {\r\n        x: letterToNum.indexOf(fenInfo[2][0]),\r\n        y: 8-parseInt(fenInfo[2][1])\r\n      };\r\n    }\r\n\r\n    //halfmove clock\r\n    this.gameController.halfmoveCount = fenInfo[3];\r\n\r\n    //fullmove counter\r\n    this.gameController.moveCount = fenInfo[4];\r\n    this.drawPieces();\r\n  }\r\n\r\n  getFEN(){\r\n    let fenString = \"\";\r\n    let counter = 0;\r\n\r\n    for (let i = 0; i < this.board.length; i++) {\r\n      for (let j = 0; j < this.board[i].length; j++) {\r\n        if(this.board[i][j]!==\"-\"){\r\n          if(counter>0){\r\n            fenString += counter;\r\n            counter = 0;\r\n          }\r\n          fenString += this.board[i][j].type;\r\n        }else{\r\n          counter++\r\n        }\r\n      }\r\n      if(counter>0){\r\n        fenString += counter;\r\n        counter = 0;\r\n      }\r\n      if(i!==this.board.length-1)\r\n        fenString += \"/\";\r\n    }   \r\n\r\n    fenString += \" \"; \r\n    fenString += (this.gameController.whiteToMove) ? \"w\": \"b\"; \r\n    fenString += \" \"; \r\n   \r\n    let castlingInfo = \"\";\r\n    this.rooks = this.gameController.findRooks(this)\r\n    \r\n    //add to fen if castling is available\r\n    if(!this.gameController.king.white.wasMoved){\r\n      this.rooks.white.forEach(rook=>{\r\n        if(!rook.wasMoved){\r\n          if(rook.pos.x==7 && rook.pos.y==7){\r\n            castlingInfo += \"K\";\r\n          }\r\n          if(rook.pos.x==0 && rook.pos.y==7){\r\n            castlingInfo += \"Q\";\r\n          }\r\n        }\r\n      })\r\n    }\r\n    if(!this.gameController.king.black.wasMoved){\r\n      this.rooks.black.forEach(rook=>{\r\n        if(!rook.wasMoved){\r\n          if(rook.pos.x==7 && rook.pos.y==0){\r\n            castlingInfo += \"k\";\r\n          }\r\n          if(rook.pos.x==0 && rook.pos.y==0){\r\n            castlingInfo += \"q\";\r\n          }\r\n        }\r\n      })\r\n    }\r\n\r\n    if(castlingInfo==\"\"){\r\n      fenString += \"- \"; \r\n    }else{\r\n      fenString += castlingInfo;\r\n      fenString += \" \"; \r\n    }\r\n\r\n    let enpassant = this.gameController.enPassantTargetSquare\r\n    if(enpassant){\r\n      let a = [\"a\", \"b\", \"c\", \"d\" ,\"e\" ,\"f\", \"g\", \"h\"]\r\n      fenString += a[enpassant.x] + (8-parseInt(enpassant.y)); \r\n      fenString += \" \"; \r\n    }else{\r\n      fenString += \"- \"; \r\n    }\r\n    fenString += this.gameController.halfmoveCount;\r\n    fenString += \" \";\r\n    fenString += this.gameController.moveCount;\r\n\r\n    return fenString;\r\n  }\r\n\r\n  getPGN(){\r\n    let pgn = \"\";\r\n    let gameResult = \"\";\r\n    let movesHistory = this.gameController.movesHistory;\r\n    if(!movesHistory) return;\r\n\r\n    //map moves to ids\r\n    this.gameController.movesHistory.mapToId();\r\n    //add moves to pgn string\r\n    for (let i = 1; i < movesHistory.length; i++) {\r\n      let move = movesHistory.movesMap[i];\r\n      pgn += (i%2==1) ? Math.ceil(i/2)+\".\"+move.move+\" \" : move.move+\" \";\r\n    }\r\n\r\n    switch (this.gameController.currentGameStatus) {\r\n      case this.gameController.gameStatus.draw:\r\n        gameResult = \"1/2-1/2\";\r\n        break;\r\n      case this.gameController.gameStatus.white_won:\r\n        gameResult = \"1-0\";\r\n        break;\r\n      case this.gameController.gameStatus.black_won:\r\n        gameResult = \"0-1\";\r\n        break;\r\n      case this.gameController.gameStatus.active:\r\n        gameResult = \"*\";\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    pgn += gameResult;\r\n    return pgn;\r\n  }\r\n\r\n  getControlledSquares(){\r\n    //init\r\n    this.controlledSquares = {white: [], black: []};\r\n    let whiteSquares = [];\r\n    let blackSquares = [];\r\n\r\n    //loop through all the pieces and add their legal moves to array\r\n    for (let i = 0; i < this.board.length; i++) {\r\n      for (let j = 0; j < this.board[i].length; j++) {\r\n        const piece = this.board[i][j];\r\n        if(piece!==\"-\"){\r\n          let legalMoves = piece.getLegalMoves(this);\r\n          if(piece.type.toLowerCase()==\"p\"){\r\n            legalMoves = legalMoves.filter(e=>e.x!==piece.pos.x);\r\n          }\r\n          if(piece.isWhite){\r\n            whiteSquares.push(...legalMoves)\r\n          }else{\r\n            blackSquares.push(...legalMoves)\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    //remove duplicates \r\n    //just in case\r\n    whiteSquares = [...new Set(whiteSquares)]\r\n    blackSquares = [...new Set(blackSquares)]\r\n\r\n    this.controlledSquares = {\r\n      white: whiteSquares, \r\n      black: blackSquares\r\n    };\r\n\r\n    //disply squares that the pieces 'see' on the board \r\n    // this.showControlledSquares(true)\r\n  }\r\n\r\n  removeControlledSquares(){\r\n    //remove previous\r\n    for (const e of document.querySelectorAll(\".highlight\")) {\r\n      e.remove()\r\n    }\r\n  }\r\n\r\n  showControlledSquares(isWhite){\r\n    this.removeControlledSquares();\r\n\r\n    //display new for white or black\r\n    if(isWhite){\r\n      this.controlledSquares.white.forEach(({x,y, isEmpty, isAlly})=>{\r\n        const point = document.createElement(\"div\");\r\n        point.setAttribute(\"class\", \"highlight\")\r\n        this.boardDiv.prepend(point);\r\n        point.style.width = (this.boardRect.width/8) + \"px\"\r\n        point.style.height = (this.boardRect.height/8) + \"px\"\r\n        point.style.left = x*(this.boardRect.width/8)+ \"px\";\r\n        point.style.top = y*(this.boardRect.height/8) + \"px\";\r\n      })\r\n    }else{\r\n      this.controlledSquares.black.forEach(({x,y, isEmpty, isAlly})=>{\r\n        const point = document.createElement(\"div\");\r\n        point.setAttribute(\"class\", \"highlight\")\r\n        this.boardDiv.prepend(point);\r\n        point.style.width = (this.boardRect.width/8) + \"px\"\r\n        point.style.height = (this.boardRect.height/8) + \"px\"\r\n        point.style.left = x*(this.boardRect.width/8) + \"px\";\r\n        point.style.top = y*(this.boardRect.height/8) + \"px\";\r\n      })\r\n    }\r\n    \r\n  }\r\n\r\n  getAllLegalMoves(){\r\n    let white = [];\r\n    let black = [];\r\n\r\n    for (let i = 0; i < this.board.length; i++) {\r\n      for (let j = 0; j < this.board[i].length; j++) {\r\n        const piece = this.board[i][j];\r\n        if(piece!==\"-\"){\r\n          let legalMoves = piece.getLegalMoves(this);\r\n          //\r\n          // if(piece.type.toLowerCase()==\"p\") legalMoves = legalMoves.filter(e=>e.x==piece.pos.x);\r\n          \r\n          if(piece.isWhite){\r\n            white.push(...legalMoves.map(({x,y,isEmpty, isAlly})=>{\r\n              if(!(this.gameController.seeIfCheck(x,y, isEmpty, this, piece) || (isEmpty==false && isAlly==true)) ){\r\n                return {x,y,isEmpty, isAlly, piece}\r\n              }\r\n              return null;\r\n            }))\r\n          }else{\r\n            black.push(...legalMoves.map(({x,y,isEmpty, isAlly})=>{\r\n              if(!(this.gameController.seeIfCheck(x,y, isEmpty, this, piece) || (isEmpty==false && isAlly==true)) ){\r\n                return {x,y,isEmpty, isAlly, piece}\r\n              }\r\n              return null;\r\n            }))\r\n          }\r\n        }\r\n      }\r\n    }\r\n   \r\n    white = white.filter(e=>e!==null);\r\n    black = black.filter(e=>e!==null);\r\n    return {white, black}\r\n  }\r\n\r\n  getAllPieces(){\r\n    let allPieces = {\r\n      white: [],\r\n      black: []\r\n    }\r\n\r\n    for (let i = 0; i < this.board.length; i++) {\r\n      for (let j = 0; j < this.board[i].length; j++) {\r\n        const piece = this.board[i][j];\r\n        if(piece!==\"-\"){\r\n          if(piece.isWhite){\r\n            allPieces.white.push(piece);\r\n          }else{\r\n            allPieces.black.push(piece);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return allPieces;\r\n  }\r\n\r\n  sumAllPiecesValue(){\r\n    let values = {\r\n      white: 0,\r\n      black: 0\r\n    }\r\n    let allPieces = this.getAllPieces();\r\n    allPieces.white.forEach(p=>values.white += p.value)\r\n    allPieces.black.forEach(p=>values.black += p.value)\r\n\r\n    return values;\r\n  }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Board);\n\n//# sourceURL=webpack://chess/./src/components/Board.js?");

/***/ }),

/***/ "./src/components/GameController.js":
/*!******************************************!*\
  !*** ./src/components/GameController.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _pieces_Bishop__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./pieces/Bishop */ \"./src/components/pieces/Bishop.js\");\n/* harmony import */ var _Board__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Board */ \"./src/components/Board.js\");\n/* harmony import */ var _pieces_king__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./pieces/king */ \"./src/components/pieces/king.js\");\n/* harmony import */ var _pieces_Knight__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pieces/Knight */ \"./src/components/pieces/Knight.js\");\n/* harmony import */ var _pieces_Pawn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./pieces/Pawn */ \"./src/components/pieces/Pawn.js\");\n/* harmony import */ var _pieces_Piece__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./pieces/Piece */ \"./src/components/pieces/Piece.js\");\n/* harmony import */ var _pieces_Queen__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./pieces/Queen */ \"./src/components/pieces/Queen.js\");\n/* harmony import */ var _pieces_Rook__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./pieces/Rook */ \"./src/components/pieces/Rook.js\");\n/* harmony import */ var _MovesHistory__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./MovesHistory */ \"./src/components/MovesHistory.js\");\n/* harmony import */ var _UserInterface__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./UserInterface */ \"./src/components/UserInterface.js\");\n/* harmony import */ var _ai_AI__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./ai/AI */ \"./src/components/ai/AI.js\");\n/* harmony import */ var js_chess_engine__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! js-chess-engine */ \"./node_modules/js-chess-engine/dist/js-chess-engine.js\");\n/* harmony import */ var js_chess_engine__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(js_chess_engine__WEBPACK_IMPORTED_MODULE_11__);\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass GameController{\r\n  constructor(userInterface){\r\n    this.userInterface = userInterface || {};\r\n    this.inCheck = {\r\n      white: false,\r\n      black: false,\r\n    }\r\n    this.inCheckTemp = { \r\n      white: false,\r\n      black: false,\r\n    }\r\n    this.king = {\r\n      white: undefined,\r\n      black: undefined\r\n    }\r\n    this.gameStatus = {\r\n      active: 0,\r\n      black_won: 1,\r\n      white_won: 2,\r\n      draw: 3,\r\n      paused: 4\r\n    }\r\n    this.enPassantTargetSquare = undefined\r\n    this.allPiecesValue = {};\r\n    this.currentGameStatus = \"\";\r\n    this.whiteToMove = true;\r\n    this.halfmoveCount = 0;\r\n    this.moveCount = 0;\r\n    this.movesHistory = \"\";\r\n    this.board = null;\r\n    this.computerActive = false;\r\n    this.playVsAiActive = false;\r\n    this.ai = null;\r\n    this.ai2 = null;\r\n  }\r\n  \r\n  init(fenStr, board){\r\n    //clear move highlights\r\n    window.addEventListener('click', function(e){   \r\n      for (const e of document.querySelectorAll(\".square-move\")) {\r\n        e.remove()\r\n      }\r\n    });\r\n    this.board = board;\r\n    this.currentGameStatus = this.gameStatus.active;\r\n\r\n    this.board.removePieces();\r\n    this.board.readFEN(fenStr);\r\n    this.findKings(this.board);\r\n\r\n    this.movesHistory = new _MovesHistory__WEBPACK_IMPORTED_MODULE_8__[\"default\"]();\r\n    this.userInterface.updateMoves(this.movesHistory);\r\n    this.userInterface.currentMove = 0;\r\n    for (const e of document.querySelectorAll(\".move-highlight\")) {\r\n      e.remove()\r\n    }\r\n    this.movesHistory.set({\r\n      pos: fenStr,\r\n      move: \"\",\r\n    })\r\n  }\r\n\r\n  findKings(board){\r\n    for (let i = 0; i < board.board.length; i++) {\r\n      for (let j = 0; j < board.board[i].length; j++) {\r\n        if(board.board[j][i].type===\"k\"){\r\n          this.king.black = board.board[j][i];\r\n        }else if(board.board[j][i].type===\"K\"){\r\n          this.king.white = board.board[j][i];\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  findRooks(board){\r\n    let rooks = {white: [], black:[]}\r\n    for (let i = 0; i < board.board.length; i++) {\r\n      for (let j = 0; j < board.board[i].length; j++) {\r\n        if(board.board[j][i].type===\"r\"){\r\n          rooks.black.push(board.board[j][i]);\r\n        }else if(board.board[j][i].type===\"R\"){\r\n          rooks.white.push(board.board[j][i]);\r\n        }\r\n      }\r\n    }\r\n    return rooks;\r\n  }\r\n\r\n  findPawns(board){\r\n    let pawns = []\r\n    for (let i = 0; i < board.board.length; i++) {\r\n      for (let j = 0; j < board.board[i].length; j++) {\r\n        if(board.board[j][i]!==\"-\"){\r\n          if(board.board[j][i].type.toLowerCase()===\"p\"){\r\n            pawns.push(board.board[j][i]);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return pawns;\r\n  }\r\n\r\n  //return true if piece can be moved to x,y\r\n  moveValidation(x,y, isEmpty, board, piece, castle){\r\n    if(this.currentGameStatus !== this.gameStatus.active) return false;\r\n    if(!((this.whiteToMove&& piece.isWhite) || (!this.whiteToMove&& !piece.isWhite))) return false;\r\n    \r\n    //castling\r\n    if(castle){\r\n      if(!castle.long){\r\n        this.makeMove(piece.pos.x+1, piece.pos.y, true, board, castle.rook);\r\n        this.makeMove(x,y, isEmpty, board, piece);\r\n        board.drawPieces();\r\n        this.whiteToMove = !this.whiteToMove;\r\n        piece.wasMoved = true;\r\n        this.historySave(x,y,piece, board, this.inCheckTemp, 0, \"short\");\r\n        return true;\r\n      }else{\r\n        this.makeMove(piece.pos.x-1, piece.pos.y, true, board, castle.rook);\r\n        this.makeMove(x,y, isEmpty, board, piece);\r\n        board.drawPieces();\r\n        this.whiteToMove = !this.whiteToMove;\r\n        piece.wasMoved = true;\r\n        this.historySave(x,y,piece, board, this.inCheckTemp, 0, \"long\");\r\n        return true;\r\n      }\r\n    }\r\n\r\n    let xBefore = -1;\r\n    this.isCapture = false;\r\n\r\n    if(piece.type.toLowerCase()==\"p\"){\r\n      xBefore = piece.pos.x\r\n    }\r\n\r\n\r\n    if(this.seeIfCheck(x,y, isEmpty, board, piece)) return false;\r\n    this.makeMove(x,y, isEmpty, board, piece);\r\n    board.drawPieces();\r\n\r\n    const fen = board.getFEN();\r\n    const gameStatus = (0,js_chess_engine__WEBPACK_IMPORTED_MODULE_11__.status)(fen);\r\n\r\n    this.inCheck.white = false;\r\n    this.inCheck.black = false;\r\n    if (gameStatus.check) {\r\n      if (gameStatus.turn === 'white') {\r\n        this.inCheck.white = true;\r\n      } else {\r\n        this.inCheck.black = true;\r\n      }\r\n    }\r\n\r\n    this.historySave(x,y,piece, board, this.inCheck, xBefore);\r\n    this.endGameCheck();\r\n\r\n    return true;\r\n  }\r\n\r\n  //set game status to draw if the position was repeated three times\r\n  drawByRepetition(board, history){\r\n    if(history.countRepeat(board.getFEN().split(\" \")[0])>=3){\r\n      this.currentGameStatus = this.gameStatus.draw;\r\n      this.endGameHandler(board, '', \"repetition\")\r\n    }\r\n  }\r\n  \r\n  makeMove(x,y, isEmpty, board, piece){\r\n    this.halfmoveCount++;\r\n    \r\n    if(!isEmpty){\r\n      // check if move is a capture\r\n      this.halfmoveCount=0;\r\n      board.board[y][x].die();\r\n      board.drawPieces();\r\n      this.isCapture  = true;\r\n    }\r\n    //if move is a en passant\r\n    if(this.enPassantTargetSquare){\r\n      if(piece.type.toLowerCase()==\"p\" && x==this.enPassantTargetSquare.x && y==this.enPassantTargetSquare.y){\r\n        let offset = (piece.isWhite) ? 1 : -1;\r\n\r\n        this.halfmoveCount=0;\r\n        board.board[y+offset][x].die();\r\n        board.board[y+offset][x].pieceDiv.remove();\r\n        board.board[y+offset][x] = \"-\"\r\n        board.drawPieces();\r\n        this.isCapture  = true;\r\n      }\r\n    }\r\n\r\n    if(piece.type.toLowerCase()=='p'){\r\n      this.halfmoveCount=0;\r\n    }\r\n\r\n    let prevX = piece.pos.x;\r\n    let prevY = piece.pos.y;\r\n    board.board[piece.pos.y][piece.pos.x] = \"-\";\r\n    piece.pos = {\r\n      x: (x>7) ? 7 : (x<0) ? 0 : x,\r\n      y: (y>7) ? 7 : (y<0) ? 0 : y\r\n    }\r\n    board.board[piece.pos.y][piece.pos.x] = piece;\r\n    piece.wasMoved = true;\r\n    \r\n    if(this.whiteToMove){\r\n      this.moveCount++\r\n    }\r\n    \r\n    this.whiteToMove = !this.whiteToMove;\r\n    for (const e of document.querySelectorAll(\".square-move\")) {\r\n      e.remove()\r\n    }\r\n\r\n    //handle en passant\r\n    this.enPassantTargetSquare = undefined;\r\n    if(piece.isWhite){\r\n      if(piece.type.toLowerCase()=='p' && prevY==piece.pos.y+2){\r\n        this.enPassantTargetSquare = {\r\n          x: piece.pos.x,\r\n          y: piece.pos.y+1\r\n        }\r\n      }\r\n    }else{\r\n      if(piece.type.toLowerCase()=='p' && prevY==piece.pos.y-2){\r\n        this.enPassantTargetSquare = {\r\n          x: piece.pos.x,\r\n          y: piece.pos.y-1\r\n        }\r\n      }\r\n    }\r\n\r\n    this.highlightMove(prevX, prevY, x, y, board);\r\n  }\r\n\r\n  highlightMove(prevX, prevY, x, y, board){\r\n    for (const e of document.querySelectorAll(\".move-highlight\")) {\r\n      e.remove()\r\n    }\r\n\r\n    const highlightAfter = document.createElement(\"div\");\r\n    const highlightBefore = document.createElement(\"div\");\r\n    highlightAfter.setAttribute(\"class\", \"move-highlight\")\r\n    highlightBefore.setAttribute(\"class\", \"move-highlight\")\r\n    \r\n    highlightAfter.style.left = prevX*(this.board.boardRect.width/8) + \"px\";\r\n    highlightAfter.style.top = prevY*(this.board.boardRect.height/8) + \"px\";\r\n    highlightBefore.style.left = x*(this.board.boardRect.width/8) + \"px\";\r\n    highlightBefore.style.top = y*(this.board.boardRect.height/8) + \"px\";\r\n    board.boardDiv.prepend(highlightAfter, highlightBefore);\r\n  }\r\n\r\n  historySave(x, y, piece, board, inCheck, xBefore, castle=false){\r\n    //save move\r\n\r\n    let a = [\"a\", \"b\", \"c\", \"d\" ,\"e\" ,\"f\", \"g\", \"h\"];\r\n    let move = (piece.type.toLowerCase()==\"p\") ? \"\" : piece.type.toUpperCase();\r\n    move += (piece.type.toLowerCase()==\"p\" && this.isCapture ) ? a[xBefore]+\"x\" : (this.isCapture ) ? \"x\" : \"\";\r\n    move += a[x]+(8-y);\r\n    move += (this.currentGameStatus == this.gameStatus.white_won || this.currentGameStatus == this.gameStatus.black_won) ? \"#\" : (inCheck.white || inCheck.black) ? \"+\" : \"\";\r\n    if(castle){\r\n      move = (castle==\"long\") ? \"0-0-0\" : \"0-0\";\r\n    }\r\n\r\n    this.movesHistory.set({\r\n      move: move,\r\n      pos: board.getFEN()\r\n    })\r\n\r\n    this.userInterface.updateMoves(this.movesHistory);\r\n    this.userInterface.currentMove++\r\n    this.userInterface.updateCurrentMove();\r\n    \r\n    if(this.userInterface.showCsW || this.userInterface.showCsB){\r\n      board.getControlledSquares();\r\n      if(this.userInterface.showCsW){\r\n        board.showControlledSquares(true);\r\n      }\r\n      if(this.userInterface.showCsB){\r\n        board.showControlledSquares(false);\r\n      }\r\n    }\r\n  }\r\n\r\n  //return true if piece would be in check after moving to x,y\r\n  seeIfCheck(x,y, isEmpty, board, piece){\r\n    this.temp = new _Board__WEBPACK_IMPORTED_MODULE_1__[\"default\"](this)\r\n    this.temp.board = [[],[],[],[],[],[],[],[]]\r\n    this.temp.boardDiv = board.boardDiv\r\n\r\n    if(piece.type.toLowerCase()==\"k\"){\r\n      this.tempPiece = new _pieces_king__WEBPACK_IMPORTED_MODULE_2__[\"default\"](piece.type, piece.pos.x, piece.pos.y, piece.isWhite);\r\n    }else if(piece.type.toLowerCase()==\"p\"){\r\n      this.tempPiece = new _pieces_Pawn__WEBPACK_IMPORTED_MODULE_4__[\"default\"](piece.type, piece.pos.x, piece.pos.y, piece.isWhite);\r\n    }else if(piece.type.toLowerCase()==\"n\"){\r\n      this.tempPiece = new _pieces_Knight__WEBPACK_IMPORTED_MODULE_3__[\"default\"](piece.type, piece.pos.x, piece.pos.y, piece.isWhite);\r\n    }else if(piece.type.toLowerCase()==\"r\"){\r\n      this.tempPiece = new _pieces_Rook__WEBPACK_IMPORTED_MODULE_7__[\"default\"](piece.type, piece.pos.x, piece.pos.y, piece.isWhite);\r\n    }else if(piece.type.toLowerCase()==\"b\"){\r\n      this.tempPiece = new _pieces_Bishop__WEBPACK_IMPORTED_MODULE_0__[\"default\"](piece.type, piece.pos.x, piece.pos.y, piece.isWhite);\r\n    }else if(piece.type.toLowerCase()==\"q\"){\r\n      this.tempPiece = new _pieces_Queen__WEBPACK_IMPORTED_MODULE_6__[\"default\"](piece.type, piece.pos.x, piece.pos.y, piece.isWhite);\r\n    }else{\r\n      this.tempPiece = new _pieces_Piece__WEBPACK_IMPORTED_MODULE_5__[\"default\"](piece.type, piece.pos.x, piece.pos.y, piece.isWhite);\r\n    }\r\n\r\n    //create temporary board\r\n    for (let i = 0; i < board.board.length; i++) {\r\n      for (let j = 0; j < board.board[i].length; j++) {\r\n        if(board.board[i][j]==\"-\"){\r\n          this.temp.board[i][j]=\"-\"\r\n        }else{\r\n          if(board.board[i][j].type.toLowerCase()==\"k\"){\r\n            this.temp.board[i][j] = new _pieces_king__WEBPACK_IMPORTED_MODULE_2__[\"default\"](board.board[i][j].type, j, i, (board.board[i][j].type.toLowerCase()==board.board[i][j].type) ? false : true);\r\n          }else if(board.board[i][j].type.toLowerCase()==\"p\"){\r\n            this.temp.board[i][j] = new _pieces_Pawn__WEBPACK_IMPORTED_MODULE_4__[\"default\"](board.board[i][j].type, j, i, (board.board[i][j].type.toLowerCase()==board.board[i][j].type) ? false : true);\r\n          }else if(board.board[i][j].type.toLowerCase()==\"n\"){\r\n            this.temp.board[i][j] = new _pieces_Knight__WEBPACK_IMPORTED_MODULE_3__[\"default\"](board.board[i][j].type, j, i, (board.board[i][j].type.toLowerCase()==board.board[i][j].type) ? false : true);\r\n          }else if(board.board[i][j].type.toLowerCase()==\"r\"){\r\n            this.temp.board[i][j] = new _pieces_Rook__WEBPACK_IMPORTED_MODULE_7__[\"default\"](board.board[i][j].type, j, i, (board.board[i][j].type.toLowerCase()==board.board[i][j].type) ? false : true);\r\n          }else if(board.board[i][j].type.toLowerCase()==\"b\"){\r\n            this.temp.board[i][j] = new _pieces_Bishop__WEBPACK_IMPORTED_MODULE_0__[\"default\"](board.board[i][j].type, j, i, (board.board[i][j].type.toLowerCase()==board.board[i][j].type) ? false : true);\r\n          }else if(board.board[i][j].type.toLowerCase()==\"q\"){\r\n            this.temp.board[i][j] = new _pieces_Queen__WEBPACK_IMPORTED_MODULE_6__[\"default\"](board.board[i][j].type, j, i, (board.board[i][j].type.toLowerCase()==board.board[i][j].type) ? false : true);\r\n          }else{\r\n            this.temp.board[i][j] = new _pieces_Piece__WEBPACK_IMPORTED_MODULE_5__[\"default\"](board.board[i][j].type, j, i, (board.board[i][j].type.toLowerCase()==board.board[i][j].type) ? false : true);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    //change piece pos on a temp board\r\n    if(!isEmpty){\r\n      this.temp.board[y][x].die();\r\n    }\r\n    this.temp.board[this.tempPiece.pos.y][this.tempPiece.pos.x] = \"-\";\r\n    this.tempPiece.pos = {\r\n      x: (x>7) ? 7 : (x<0) ? 0 : x,\r\n      y: (y>7) ? 7 : (y<0) ? 0 : y\r\n    }\r\n    this.temp.board[this.tempPiece.pos.y][this.tempPiece.pos.x] = this.tempPiece;\r\n    this.temp.getControlledSquares();\r\n    this.inCheckTemp.white = false;\r\n    this.inCheckTemp.black = false;\r\n    \r\n    this.findKings(this.temp);\r\n    this.temp.controlledSquares.black.forEach(({x: sX, y: sY}) => {\r\n      if(sX==this.king.white.pos.x && sY==this.king.white.pos.y){\r\n        this.inCheckTemp.white = true;\r\n      }\r\n    });\r\n    this.temp.controlledSquares.white.forEach(({x: sX, y: sY}) => {\r\n      if(sX==this.king.black.pos.x && sY==this.king.black.pos.y){\r\n        this.inCheckTemp.black = true;\r\n      }\r\n    });\r\n    // this.temp.showControlledSquares()\r\n\r\n    if((this.inCheckTemp.white && piece.isWhite) || (this.inCheckTemp.black && !piece.isWhite)){\r\n      //when king would be in check\r\n      board.drawPieces();\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n  \r\n  //dispaly end game message\r\n  endGameHandler(board, color, type){\r\n    if(color=='w'){\r\n      board.gameMessage.style.display=\"flex\";\r\n      board.title.innerHTML = \"WHITE WON\";\r\n      board.subtitle.innerHTML = \"by \"+type;\r\n\r\n    }else if(color=='b'){\r\n      board.gameMessage.style.display=\"flex\";\r\n      board.title.innerHTML = \"BLACK WON\";\r\n      board.subtitle.innerHTML = \"by \"+type;\r\n\r\n    }else{\r\n      board.gameMessage.style.display=\"flex\";\r\n      board.title.innerHTML = \"DRAW\";\r\n      board.subtitle.innerHTML = \"by \"+type;\r\n    }\r\n  }\r\n\r\n  playAIvsAI(difficulty){\r\n    this.computerActive = true;\r\n    this.ai = new _ai_AI__WEBPACK_IMPORTED_MODULE_10__[\"default\"](difficulty, this);\r\n    this.ai2 = new _ai_AI__WEBPACK_IMPORTED_MODULE_10__[\"default\"](difficulty, this);\r\n    const play = ()=>{\r\n      if(!this.computerActive) return;\r\n\r\n      if(this.whiteToMove){\r\n        this.ai.play(this.board)\r\n      }else{\r\n        this.ai2.play(this.board)\r\n      }\r\n      setTimeout(play, 500)\r\n    }\r\n    play();\r\n  }\r\n\r\n  endAIvsAI(){\r\n    this.computerActive = false;\r\n  }\r\n\r\n  playVsAI(difficulty){\r\n    this.playVsAiActive = true;\r\n    this.ai = new _ai_AI__WEBPACK_IMPORTED_MODULE_10__[\"default\"](difficulty, this);\r\n\r\n    const play = ()=>{\r\n      if(!this.playVsAiActive) return;\r\n\r\n      if(!this.whiteToMove){\r\n        this.ai.play(this.board);\r\n      }\r\n      setTimeout(play, 500);\r\n    }\r\n    play();\r\n  }\r\n\r\n  endVsAI(){\r\n    this.playVsAiActive = false;\r\n  }\r\n\r\n  endGameCheck(){\r\n    if(this.currentGameStatus !== this.gameStatus.active) return;\r\n    const board = this.board;\r\n    const fen = board.getFEN();\r\n    const gameStatus = (0,js_chess_engine__WEBPACK_IMPORTED_MODULE_11__.status)(fen);\r\n\r\n    // Check for checkmate/stalemate using the engine\r\n    if (gameStatus.isFinished) {\r\n        if (gameStatus.checkMate) {\r\n            if (gameStatus.turn === 'white') { // White is to move and is in checkmate\r\n                this.currentGameStatus = this.gameStatus.black_won;\r\n                this.endGameHandler(board, 'b', \"checkmate\");\r\n            } else { // Black is to move and is in checkmate\r\n                this.currentGameStatus = this.gameStatus.white_won;\r\n                this.endGameHandler(board, 'w', \"checkmate\");\r\n            }\r\n        } else {\r\n            this.currentGameStatus = this.gameStatus.draw;\r\n            this.endGameHandler(board, '', \"stalemate\");\r\n        }\r\n        return; // Game ended\r\n    }\r\n    \r\n    // Draw by insufficient material\r\n    if(this.findPawns(board).length<=0){\r\n      this.allPiecesValue = board.sumAllPiecesValue();\r\n      if(this.allPiecesValue.white<=3 && this.allPiecesValue.black<=3){\r\n        this.currentGameStatus = this.gameStatus.draw;\r\n        this.endGameHandler(board, '', \"insufficient material\")\r\n        return;\r\n      }\r\n    }\r\n\r\n    // 50-move rule\r\n    if(this.halfmoveCount>=100){\r\n      this.currentGameStatus = this.gameStatus.draw;\r\n      this.endGameHandler(board, '', \"fifty-move rule\")\r\n      return;\r\n    }\r\n\r\n    // Draw by repetition\r\n    if(this.movesHistory && this.movesHistory.countRepeat(board.getFEN().split(\" \")[0])>=3){\r\n      this.currentGameStatus = this.gameStatus.draw;\r\n      this.endGameHandler(board, '', \"repetition\")\r\n      return;\r\n    }\r\n  }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (GameController);\n\n//# sourceURL=webpack://chess/./src/components/GameController.js?");

/***/ }),

/***/ "./src/components/MovesHistory.js":
/*!****************************************!*\
  !*** ./src/components/MovesHistory.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass MovesHistory{\r\n  constructor(){\r\n    this.moves = {};\r\n    this.movesMap = {};\r\n    this.length = 0;\r\n  }\r\n\r\n  set(data){\r\n    let key = data.pos.split(\" \")[0];\r\n    if(this.moves[key]){\r\n      this.moves[key].push({\r\n        id: this.length,\r\n        move: data.move,\r\n        pos: data.pos\r\n      });\r\n      this.length++;\r\n      return;\r\n    }\r\n    this.moves[key] = [{\r\n      id: this.length,\r\n      move: data.move,\r\n      pos: data.pos\r\n    }];\r\n    this.length++;\r\n  }\r\n\r\n  get(pos){\r\n    if(!this.moves[pos]) return;\r\n    return this.moves[pos];\r\n  }\r\n\r\n  countRepeat(pos){\r\n    return this.moves[pos].length;\r\n  }\r\n  \r\n  forEach(func){\r\n    for (const key in this.moves) {\r\n      if(this.moves[key].length>1){\r\n        for (let i = 0; i < this.moves[key].length; i++) {\r\n          func(this.moves[key][i]);\r\n        }\r\n      }else if(this.moves[key].length==1){\r\n        func(this.moves[key][0]);\r\n      }\r\n    }\r\n  }\r\n\r\n  mapToId(){\r\n    for (const key in this.moves) {\r\n      if(this.moves[key].length>1){\r\n        for (let i = 0; i < this.moves[key].length; i++) {\r\n          const e = this.moves[key][i];\r\n          this.movesMap[e.id] = e;\r\n        }\r\n      }else{\r\n        const e = this.moves[key][0];\r\n        this.movesMap[e.id] = e;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MovesHistory);\n\n//# sourceURL=webpack://chess/./src/components/MovesHistory.js?");

/***/ }),

/***/ "./src/components/UserInterface.js":
/*!*****************************************!*\
  !*** ./src/components/UserInterface.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass UserInterface{\r\n  constructor(){\r\n    this.buttons = {};\r\n    this.showCsB = false;\r\n    this.showCsW = false;\r\n    this.gameController = null;\r\n    this.board = null;\r\n    this.histPos = 0;\r\n    this.movesList = document.createElement(\"div\");\r\n    this.currentMove = 0;\r\n    this.difficulty = 2;\r\n  }\r\n\r\n  // SVG icons for buttons\r\n  static ICONS = {\r\n    PREV: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M15 18l-6-6 6-6\"/></svg>`,\r\n    NEXT: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M9 18l6-6-6-6\"/></svg>`,\r\n    BACK: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><line x1=\"19\" y1=\"12\" x2=\"5\" y2=\"12\"></line><polyline points=\"12 19 5 12 12 5\"></polyline></svg>`,\r\n    DOWNLOAD: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path><polyline points=\"7 10 12 15 17 10\"></polyline><line x1=\"12\" y1=\"15\" x2=\"12\" y2=\"3\"></line></svg>`,\r\n    THREAT_MAP: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M3 3h7v7H3z\"/><path d=\"M14 3h7v7h-7z\"/><path d=\"M14 14h7v7h-7z\"/><path d=\"M3 14h7v7H3z\"/></svg>`,\r\n    PLAY: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polygon points=\"5 3 19 12 5 21 5 3\"></polygon></svg>`,\r\n    USER: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\"></path><circle cx=\"12\" cy=\"7\" r=\"4\"></circle></svg>`,\r\n    ROBOT: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><rect x=\"2\" y=\"3\" width=\"20\" height=\"14\" rx=\"2\" ry=\"2\"></rect><line x1=\"8\" y1=\"21\" x2=\"16\" y2=\"21\"></line><line x1=\"12\" y1=\"17\" x2=\"12\" y2=\"21\"></line></svg>`\r\n  }\r\n\r\n  handlePrevious(movesHistory, board){\r\n    if(this.currentMove<=1) return;\r\n    movesHistory.mapToId();\r\n    this.currentMove--\r\n    this.board.removePieces();\r\n    this.board.readFEN(movesHistory.movesMap[this.currentMove].pos);\r\n\r\n    this.handleHighlight(board);\r\n  }\r\n\r\n  handleNext(movesHistory, board){\r\n    if(this.currentMove>movesHistory.length-2) return;\r\n    movesHistory.mapToId();\r\n    this.currentMove++\r\n    this.board.removePieces();\r\n    // if(this.histPos<0) this.histPos *=-1;\r\n    this.board.readFEN(movesHistory.movesMap[this.currentMove].pos);\r\n    \r\n    this.handleHighlight(board);\r\n  }\r\n\r\n  handleHighlight(board){\r\n    if(this.showCsW){\r\n      board.getControlledSquares();\r\n      board.showControlledSquares(true);\r\n    }else if(this.showCsB){\r\n      board.getControlledSquares();\r\n      board.showControlledSquares(false);\r\n    }\r\n    \r\n    this.updateCurrentMove()\r\n    for (const e of document.querySelectorAll(\".move-highlight\")) {\r\n      e.remove()\r\n    }\r\n  }\r\n\r\n  //used for creating user interface\r\n  //type sould be valid tag name\r\n  //returns html element\r\n  createHTMLElement({type, className, textContent = \"\"}){\r\n    let element = document.createElement(type);\r\n    element.innerHTML = textContent;\r\n    element.setAttribute(\"class\", className);\r\n    return element;\r\n  }\r\n\r\n  showInGameUI(show){\r\n    if(show){\r\n      this.inGameWrapper.style.display = \"flex\";\r\n      this.preGameWrapper.style.display = \"none\";\r\n    }else{\r\n      this.inGameWrapper.style.display = \"none\";\r\n      this.preGameWrapper.style.display = \"flex\";\r\n    }\r\n  }\r\n\r\n  init(board, gameController){\r\n    this.wrapper = document.createElement(\"div\");\r\n    this.wrapper.setAttribute(\"class\", \"wrapper\");\r\n    \r\n    \r\n    this.board = board;\r\n    this.gameController = gameController;\r\n    this.currentMove = gameController.halfmoveCount;\r\n\r\n    // --- PRE-GAME CONTROLS ---\r\n    this.preGameWrapper = this.createHTMLElement({type: \"div\", className: \"pre-game-wrapper\"});\r\n    const preGameTitle = this.createHTMLElement({type: \"h2\", className: \"pre-game-title\", textContent: \"Choose a game mode\"});\r\n    // this.buttons[\"play\"] = this.createHTMLElement({type: \"button\", className: \"play-btn\", textContent: UserInterface.ICONS.PLAY + \"Solo\"});\r\n    this.buttons[\"ai\"] = this.createHTMLElement({type: \"button\", className: \"ai-btn\", textContent: UserInterface.ICONS.USER + \" vs \" + UserInterface.ICONS.ROBOT});\r\n    this.buttons[\"cvsc\"] = this.createHTMLElement({type: \"button\", className: \"cvsc-btn\", textContent: UserInterface.ICONS.ROBOT + \" vs \" + UserInterface.ICONS.ROBOT});\r\n    \r\n    const difficultyWrapper = this.createHTMLElement({type: \"div\", className: \"difficulty-wrapper\"});\r\n    const difficultyLabel = this.createHTMLElement({type: \"label\", className: \"difficulty-label\", textContent: `AI difficulty: ${Number(this.difficulty) + 1}`});\r\n    const difficultySlider = this.createHTMLElement({type: \"input\", className: \"difficulty-slider\"});\r\n    difficultySlider.type = \"range\";\r\n    difficultySlider.min = 0;\r\n    difficultySlider.max = 3;\r\n    difficultySlider.value = this.difficulty;\r\n    difficultySlider.addEventListener(\"input\", (e) => {\r\n      this.difficulty = e.target.value;\r\n      difficultyLabel.textContent = `AI difficulty: ${Number(this.difficulty) + 1}`;\r\n    });\r\n\r\n    difficultyWrapper.append(difficultyLabel, difficultySlider);\r\n    this.preGameWrapper.append(preGameTitle, difficultyWrapper, this.buttons[\"ai\"], this.buttons[\"cvsc\"]);\r\n\r\n    // --- IN-GAME CONTROLS ---\r\n    this.inGameWrapper = this.createHTMLElement({type: \"div\", className: \"in-game-wrapper\"});\r\n    this.inGameWrapper.style.display = \"none\"; // Hidden by default\r\n\r\n    // Create button groups\r\n    this.buttonWrapper = this.createHTMLElement({type: \"div\", className: \"button-wrapper\"});\r\n    this.navGroup = this.createHTMLElement({type: \"div\", className: \"button-group nav-group\"});\r\n    this.threatGroup = this.createHTMLElement({type: \"div\", className: \"button-group threat-group\"});\r\n    \r\n    // PGN Button\r\n    this.pgnBtn = this.createHTMLElement({type:\"button\", className: \"pgnBtn\", textContent: UserInterface.ICONS.DOWNLOAD + \" PGN\"})\r\n\r\n    this.pgnModalWrapper = this.createHTMLElement({type: \"div\", className: \"pgnModalWrapper\"})\r\n    this.pgnModalWrapper.style.display = \"none\";\r\n\r\n    this.pgnModal = this.createHTMLElement({type: \"div\", className: \"pgnModal\", textContent: \"PGN\"})\r\n    this.pgnExit = this.createHTMLElement({type: \"div\", className: \"pgnExit\", textContent: \"<i class='fas fa-times'></i>\"})\r\n    this.pgnText = this.createHTMLElement({type: \"textarea\", className: \"pgnText\", textContent: \"\"})\r\n    this.pgnText.disabled = true;\r\n    this.pgnCopy = this.createHTMLElement({type: \"button\", className: \"pgnCopy\", textContent: \"Copy\"})\r\n\r\n    // Create buttons with icons\r\n    this.buttons[\"toggleWhiteCS\"] = this.createHTMLElement({type: \"button\", className: \"icon-button\", textContent: UserInterface.ICONS.THREAT_MAP + \" White\"})\r\n    this.buttons[\"toggleBlackCS\"] = this.createHTMLElement({type: \"button\", className: \"icon-button\", textContent: UserInterface.ICONS.THREAT_MAP + \" Black\"})\r\n    this.buttons[\"previous\"] = this.createHTMLElement({type: \"button\", className: \"icon-button history-btn\", textContent: UserInterface.ICONS.PREV})\r\n    this.buttons[\"next\"] = this.createHTMLElement({type: \"button\", className: \"icon-button history-btn\", textContent: UserInterface.ICONS.NEXT})\r\n    this.buttons[\"mainMenu\"] = this.createHTMLElement({type: \"button\", className: \"main-menu-btn\", textContent: UserInterface.ICONS.BACK + \"Main Menu\"});\r\n    \r\n    this.inGameDifficulty = this.createHTMLElement({type: \"div\", className: \"in-game-difficulty\"});\r\n    \r\n    this.movesList.setAttribute(\"class\", \"moves-list\");\r\n    this.movesList.innerHTML = \"<div class='move-list-header'></div>\";\r\n\r\n    const startGame = (mode) => {\r\n        this.gameController.computerActive = false;\r\n        this.gameController.playVsAiActive = false;\r\n\r\n        if (mode === 'vsAI') {\r\n            this.gameController.playVsAiActive = true;\r\n        } else if (mode === 'AIvsAI') {\r\n            this.gameController.computerActive = true;\r\n        }\r\n\r\n        this.showInGameUI(true);\r\n        this.gameController.init(\"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1\", this.board);\r\n        \r\n        if (mode === 'vsAI') this.gameController.playVsAI(this.difficulty);\r\n        if (mode === 'AIvsAI') this.gameController.playAIvsAI(this.difficulty);\r\n        this.inGameDifficulty.textContent = `Difficulty: ${Number(this.difficulty) + 1}`;\r\n    };\r\n\r\n    // --- EVENT LISTENERS ---\r\n    // this.buttons[\"play\"].addEventListener(\"click\", () => startGame('human'));\r\n    this.buttons[\"ai\"].addEventListener(\"click\", () => startGame('vsAI'));\r\n    this.buttons[\"cvsc\"].addEventListener(\"click\", () => startGame('AIvsAI'));\r\n\r\n    this.buttons[\"mainMenu\"].addEventListener(\"click\", () => {\r\n        this.showInGameUI(false);\r\n        this.gameController.currentGameStatus = this.gameController.gameStatus.paused;\r\n        this.gameController.movesHistory = [];\r\n        this.gameController.movesHistory.length = 0;\r\n        this.gameController.endAIvsAI();\r\n        this.gameController.endVsAI();\r\n        this.movesList.innerHTML = \"<div class='move-list-header'></div>\";\r\n    });\r\n\r\n    this.buttons[\"toggleWhiteCS\"].addEventListener(\"click\", ()=>{\r\n      board.removeControlledSquares();\r\n      this.showCsW = !this.showCsW;\r\n      this.showCsB = false;\r\n      this.buttons[\"toggleWhiteCS\"].style.background = \"none\";\r\n      this.buttons[\"toggleBlackCS\"].style.background = \"none\";\r\n\r\n      if(this.showCsW){\r\n        this.buttons[\"toggleWhiteCS\"].style.background = \"rgba(15, 67, 109, 0.9)\";\r\n        board.getControlledSquares();\r\n        board.showControlledSquares(true);\r\n      }\r\n    })\r\n\r\n    this.buttons[\"toggleBlackCS\"].addEventListener(\"click\", ()=>{\r\n      board.removeControlledSquares();\r\n      this.showCsB = !this.showCsB;\r\n      this.showCsW = false;\r\n      this.buttons[\"toggleWhiteCS\"].style.background = \"none\";\r\n      this.buttons[\"toggleBlackCS\"].style.background = \"none\";\r\n\r\n      if(this.showCsB){\r\n        this.buttons[\"toggleBlackCS\"].style.background = \"rgba(15, 67, 109, 0.9)\";\r\n        board.getControlledSquares();\r\n        board.showControlledSquares(false);\r\n      }\r\n    })\r\n\r\n    this.buttons[\"previous\"].addEventListener(\"click\", ()=>{\r\n      this.handlePrevious(this.gameController.movesHistory, board)\r\n    });\r\n\r\n    this.buttons[\"next\"].addEventListener(\"click\", ()=>{\r\n      this.handleNext(this.gameController.movesHistory, board)\r\n    });\r\n\r\n    this.pgnBtn.addEventListener(\"click\", ()=>{\r\n      this.pgnText.value = board.getPGN();\r\n      this.pgnModalWrapper.style.display = \"inline-block\";\r\n    })\r\n\r\n    this.pgnExit.addEventListener(\"click\", ()=>{\r\n      this.pgnModalWrapper.style.display = \"none\";\r\n    })\r\n\r\n    this.pgnCopy.addEventListener(\"click\", ()=>{\r\n      navigator.clipboard.writeText(this.pgnText.value);\r\n    })\r\n\r\n    // Group buttons\r\n    this.navGroup.append(this.buttons[\"previous\"], this.buttons[\"next\"]);\r\n    this.threatGroup.append(this.buttons[\"toggleWhiteCS\"], this.buttons[\"toggleBlackCS\"]);\r\n    \r\n    this.buttonWrapper.append(this.threatGroup);\r\n\r\n    this.pgnModal.append(this.pgnText, this.pgnExit, this.pgnCopy);\r\n    this.pgnModalWrapper.append(this.pgnModal);\r\n\r\n    this.inGameTopWrapper = this.createHTMLElement({type: \"div\", className: \"inGameTopWrapper\"})\r\n    this.inGameTopWrapper.append(this.buttons[\"mainMenu\"], this.inGameDifficulty)\r\n\r\n    this.inGameWrapper.append(this.inGameTopWrapper, this.movesList,this.navGroup, this.buttonWrapper, this.pgnBtn, this.pgnModalWrapper);\r\n    this.wrapper.append(this.preGameWrapper, this.inGameWrapper);\r\n    document.querySelector(\".container\").append(this.wrapper)\r\n  }\r\n\r\n  updateMoves(movesHistory){\r\n    this.movesList.innerHTML = \"<div class='move-list-header'></div>\";\r\n    \r\n    //map moves to ids\r\n    this.gameController.movesHistory.mapToId();\r\n    //display moves\r\n    for (let i = 1; i < movesHistory.length; i++) {\r\n      let move = movesHistory.movesMap[i];\r\n      if(!move.move) return;\r\n      let divMove = document.createElement(\"div\");\r\n      divMove.setAttribute(\"class\", \"move\");\r\n      this.movesList.appendChild(divMove);\r\n\r\n      divMove.addEventListener(\"click\", ()=>{\r\n        this.board.removePieces();\r\n        this.board.readFEN(move.pos);\r\n        this.currentMove = Array.prototype.indexOf.call(divMove.parentNode.children, divMove);\r\n        this.updateCurrentMove();\r\n        this.handleHighlight(this.board);\r\n      })\r\n      divMove.innerHTML = (i%2==1) ? Math.ceil(i/2) +\".\"+ move.move : move.move;\r\n\r\n    }\r\n  }\r\n  \r\n  updateCurrentMove(){\r\n    this.movesList.childNodes.forEach((child, i)=>{\r\n      if(child.classList[0]==\"move\"){\r\n        child.style.background = \"none\"\r\n      };\r\n    })\r\n    this.movesList.childNodes[this.currentMove].style.background = \"rgba(27, 83, 129, 0.4)\"\r\n  }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (UserInterface);\n\n//# sourceURL=webpack://chess/./src/components/UserInterface.js?");

/***/ }),

/***/ "./src/components/ai/AI.js":
/*!*********************************!*\
  !*** ./src/components/ai/AI.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var js_chess_engine__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js-chess-engine */ \"./node_modules/js-chess-engine/dist/js-chess-engine.js\");\n/* harmony import */ var js_chess_engine__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(js_chess_engine__WEBPACK_IMPORTED_MODULE_0__);\n\r\n\r\nclass AI{\r\n  constructor(level=2, gameController){\r\n    this.level = level;\r\n    this.gameController = gameController\r\n  }\r\n\r\n  play(board){\r\n    if(this.gameController.currentGameStatus !== this.gameController.gameStatus.active) return false;\r\n    \r\n    const game = new js_chess_engine__WEBPACK_IMPORTED_MODULE_0__.Game(board.getFEN());\r\n    const aiMove = game.aiMove(this.level);\r\n\r\n    if (!aiMove || Object.keys(aiMove).length === 0) {\r\n      this.gameController.endGameCheck();\r\n      return false;\r\n    }\r\n\r\n    console.log(aiMove);\r\n    \r\n    const from = Object.keys(aiMove)[0];\r\n    const to = Object.values(aiMove)[0];\r\n\r\n    const fromX = from.charCodeAt(0) - 65;\r\n    const fromY = 8 - parseInt(from[1]);\r\n\r\n    const toX = to.charCodeAt(0) - 65;\r\n    const toY = 8 - parseInt(to[1]);\r\n\r\n    const piece = board.board[fromY][fromX];\r\n    if(piece !== \"-\"){\r\n      console.log(\"Piece is called\");\r\n      console.log(piece);\r\n      piece.move(toX, toY, board);\r\n      console.log(toX, toY);\r\n    }\r\n  }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (AI); \n\n//# sourceURL=webpack://chess/./src/components/ai/AI.js?");

/***/ }),

/***/ "./src/components/helpers/checkDiagonalAndStraigt.js":
/*!***********************************************************!*\
  !*** ./src/components/helpers/checkDiagonalAndStraigt.js ***!
  \***********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst checkDiagonalAndStraigt = (i=0, j=0, board, legalMovesArray, posX, posY, isWhite) =>{\r\n  //when is out of border\r\n  \r\n  if(posY-(i)<0) return;\r\n  if(posY-(i)>7) return;\r\n  if(posX-(j)<0) return;\r\n  if(posX-(j)>7) return;\r\n\r\n  //when enemy piece is in the way\r\n  if(board.board[posY-(i)][posX-(j)]!==\"-\" || !board.board[posY-(i)][posX-(j)]){\r\n    if(board.board[posY-(i)][posX-(j)].type.toLowerCase()=='k' && board.board[posY-(i)][posX-(j)].isWhite!==isWhite){\r\n      let offsetX = (j==0) ? 0 : (j>0) ? 1 : -1;\r\n      let offsetY = (i==0) ? 0 : (i>0) ? 1 : -1;\r\n      legalMovesArray.push({\r\n        x: posX-(j+(offsetX)),\r\n        y: posY-(i+(offsetY)),\r\n        isEmpty: true,\r\n        isAlly: true\r\n      })\r\n    }\r\n    legalMovesArray.push({\r\n      x: posX-(j),\r\n      y: posY-(i),\r\n      isEmpty: false,\r\n      isAlly: (board.board[posY-(i)][posX-(j)].isWhite==isWhite) ? true : false\r\n    })\r\n    return;\r\n  }else{\r\n    //add another avaliable square\r\n    legalMovesArray.push({\r\n      x: posX-(j),\r\n      y: posY-(i),\r\n      isEmpty: true,\r\n    })\r\n\r\n    //for diagonal\r\n    if(i!==0 && j!==0){\r\n      if(i>0 && j>0){\r\n        checkDiagonalAndStraigt(i+1, j+1, board, legalMovesArray, posX, posY, isWhite);\r\n      }else if(i<0 && j<0){\r\n        checkDiagonalAndStraigt(i-1, j-1, board, legalMovesArray, posX, posY, isWhite);\r\n      }else if(i>0 && j<0){\r\n        checkDiagonalAndStraigt(i+1, j-1, board, legalMovesArray, posX, posY, isWhite);\r\n      }else if(i<0 && j>0){\r\n        checkDiagonalAndStraigt(i-1, j+1, board, legalMovesArray, posX, posY, isWhite);\r\n      }\r\n\r\n    //for straight lines\r\n    }else if(i<0){\r\n      checkDiagonalAndStraigt(i-1, 0, board, legalMovesArray, posX, posY, isWhite);\r\n    }else if(i>0){\r\n      checkDiagonalAndStraigt(i+1, 0, board, legalMovesArray, posX, posY, isWhite);\r\n    }else if(j>0){\r\n      checkDiagonalAndStraigt(0, j+1, board, legalMovesArray, posX, posY, isWhite);\r\n    }else if(j<0){\r\n      checkDiagonalAndStraigt(0, j-1, board, legalMovesArray, posX, posY, isWhite);\r\n    }\r\n  }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (checkDiagonalAndStraigt);\n\n//# sourceURL=webpack://chess/./src/components/helpers/checkDiagonalAndStraigt.js?");

/***/ }),

/***/ "./src/components/pieces/Bishop.js":
/*!*****************************************!*\
  !*** ./src/components/pieces/Bishop.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Piece__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Piece */ \"./src/components/pieces/Piece.js\");\n/* harmony import */ var _helpers_checkDiagonalAndStraigt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../helpers/checkDiagonalAndStraigt */ \"./src/components/helpers/checkDiagonalAndStraigt.js\");\n\r\n\r\n\r\nclass Bishop extends _Piece__WEBPACK_IMPORTED_MODULE_0__[\"default\"]{\r\n  constructor(type, posX, posY, isWhite){\r\n    super(type, posX, posY, isWhite);\r\n    this.value = 3;\r\n  }\r\n\r\n  getLegalMoves(board){\r\n    let legalMoves = [];\r\n\r\n    (0,_helpers_checkDiagonalAndStraigt__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(1, 1, board, legalMoves, this.pos.x, this.pos.y, this.isWhite)\r\n    ;(0,_helpers_checkDiagonalAndStraigt__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(-1, 1, board, legalMoves, this.pos.x, this.pos.y, this.isWhite)\r\n    ;(0,_helpers_checkDiagonalAndStraigt__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(1, -1, board, legalMoves, this.pos.x, this.pos.y, this.isWhite)\r\n    ;(0,_helpers_checkDiagonalAndStraigt__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(-1, -1, board, legalMoves, this.pos.x, this.pos.y, this.isWhite)\r\n\r\n    return legalMoves;\r\n  }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Bishop);\n\n//# sourceURL=webpack://chess/./src/components/pieces/Bishop.js?");

/***/ }),

/***/ "./src/components/pieces/Knight.js":
/*!*****************************************!*\
  !*** ./src/components/pieces/Knight.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Piece__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Piece */ \"./src/components/pieces/Piece.js\");\n\r\n\r\nclass Knight extends _Piece__WEBPACK_IMPORTED_MODULE_0__[\"default\"]{\r\n  constructor(type, posX, posY, isWhite){\r\n    super(type, posX, posY, isWhite);\r\n    this.value = 3;\r\n  }\r\n\r\n  getLegalMoves(board){\r\n    let legalMoves = [];\r\n    \r\n    //save all posible legal moves\r\n    if(board.board[this.pos.y+2]){\r\n      legalMoves.push({x: this.pos.x-1, y: this.pos.y+2})\r\n      legalMoves.push({x: this.pos.x+1, y: this.pos.y+2})\r\n    }\r\n\r\n    if(board.board[this.pos.y-2]){\r\n      legalMoves.push({x: this.pos.x-1, y: this.pos.y-2})\r\n      legalMoves.push({x: this.pos.x+1, y: this.pos.y-2})\r\n    }\r\n\r\n    if(board.board[this.pos.y+1]){\r\n      legalMoves.push({x: this.pos.x+2, y: this.pos.y+1})\r\n      legalMoves.push({x: this.pos.x-2, y: this.pos.y+1})\r\n    }\r\n\r\n    if(board.board[this.pos.y-1]){\r\n      legalMoves.push({x: this.pos.x+2, y: this.pos.y-1})\r\n      legalMoves.push({x: this.pos.x-2, y: this.pos.y-1})\r\n    }\r\n\r\n    //filter illegal moves\r\n    legalMoves = legalMoves\r\n    .filter(e=>{\r\n      if(board.board[e.y, e.x]){\r\n        return e;\r\n      }\r\n    })\r\n    //check for enemy pieces\r\n    .map(({x,y})=>{\r\n      let isEmpty = (board.board[y][x]!==\"-\") ? false : true;\r\n      let isAlly = (board.board[y][x].isWhite==this.isWhite) ? true : false;\r\n      return {x,y, isEmpty, isAlly}\r\n    })\r\n\r\n    return legalMoves;\r\n  }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Knight);\n\n//# sourceURL=webpack://chess/./src/components/pieces/Knight.js?");

/***/ }),

/***/ "./src/components/pieces/Pawn.js":
/*!***************************************!*\
  !*** ./src/components/pieces/Pawn.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Piece__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Piece */ \"./src/components/pieces/Piece.js\");\n/* harmony import */ var _Queen__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Queen */ \"./src/components/pieces/Queen.js\");\n\r\n\r\n\r\nclass Pawn extends _Piece__WEBPACK_IMPORTED_MODULE_0__[\"default\"]{\r\n  constructor(type, posX, posY, isWhite){\r\n    super(type, posX, posY, isWhite);\r\n    this.value = 1;\r\n  }\r\n\r\n  //return all moves\r\n  getLegalMoves(board){\r\n    let allMoves = [];\r\n    let offset = (this.isWhite) ? 1 : -1;\r\n\r\n    //piece promotion\r\n    if((this.isWhite && this.pos.y==0) || (!this.isWhite && this.pos.y==7)){\r\n      //new Piece(this.pos.x, this.pos.y ...)\r\n      let type = (this.isWhite) ? \"Q\" : \"q\";\r\n      let newPiece = new _Queen__WEBPACK_IMPORTED_MODULE_1__[\"default\"](type, this.pos.x, this.pos.y, this.isWhite);\r\n      newPiece.createPiece(board);\r\n      if(this.pieceDiv){\r\n        this.pieceDiv.remove()\r\n      }\r\n      return allMoves;\r\n    }\r\n\r\n    //captures\r\n    let directions = [this.pos.x-1, this.pos.x+1];\r\n    directions.forEach(dir => {\r\n      if(board.board[this.pos.y-offset][dir]){\r\n        //if en passant is avaliable\r\n        if(board.gameController.enPassantTargetSquare && board.gameController.enPassantTargetSquare!==\"-\"){\r\n          //if this piece can capture en passant\r\n          if(board.gameController.enPassantTargetSquare.x === dir && board.gameController.enPassantTargetSquare.y === this.pos.y-offset){\r\n            let target = board.board[board.gameController.enPassantTargetSquare.y+offset][board.gameController.enPassantTargetSquare.x];\r\n            if(target!==\"-\" && target.isWhite!==this.isWhite){\r\n              allMoves.push({\r\n                x: dir, \r\n                y: this.pos.y-offset, \r\n                isEmpty: true,\r\n                isAlly: false,\r\n                enPassant: true\r\n              })\r\n            }\r\n          }\r\n        }\r\n        //else\r\n        if(board.board[this.pos.y-offset][dir]!==\"-\"){\r\n          allMoves.push({\r\n            x: dir, \r\n            y: this.pos.y-offset, \r\n            isEmpty: false,\r\n            isAlly: (board.board[this.pos.y-offset][dir].isWhite==this.isWhite) ? true : false\r\n          })\r\n        }else{\r\n          allMoves.push({\r\n            x: dir, \r\n            y: this.pos.y-offset, \r\n            isEmpty: true,\r\n            isAlly: true\r\n          })\r\n        }\r\n      }\r\n    });\r\n    \r\n    //forward movement\r\n    if(board.board[this.pos.y-offset][this.pos.x]==\"-\"){\r\n      \r\n      allMoves.push({\r\n        x: this.pos.x, \r\n        y: this.pos.y-offset, \r\n        isEmpty: true\r\n      })\r\n      \r\n      //when the first square is empty check if the the piece was moved before\r\n      if(this.pos.y==6 && this.isWhite) offset = 2;\r\n      if(this.pos.y==1 && !this.isWhite) offset = -2;\r\n      \r\n      //and if that square is empty\r\n      if(board.board[this.pos.y-offset]){\r\n        if(board.board[this.pos.y-offset][this.pos.x]==\"-\" && !this.wasMoved){\r\n          allMoves.push({\r\n            x: this.pos.x, \r\n            y: this.pos.y-offset, \r\n            isEmpty: true\r\n          })\r\n        }\r\n\r\n      }\r\n    }\r\n\r\n    return allMoves;\r\n  }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Pawn);\n\n//# sourceURL=webpack://chess/./src/components/pieces/Pawn.js?");

/***/ }),

/***/ "./src/components/pieces/Piece.js":
/*!****************************************!*\
  !*** ./src/components/pieces/Piece.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _images_r_png__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../images/r.png */ \"./src/images/r.png\");\n/* harmony import */ var _images_wr_png__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../images/wr.png */ \"./src/images/wr.png\");\n/* harmony import */ var _images_b_png__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../images/b.png */ \"./src/images/b.png\");\n/* harmony import */ var _images_wb_png__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../images/wb.png */ \"./src/images/wb.png\");\n/* harmony import */ var _images_n_png__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../images/n.png */ \"./src/images/n.png\");\n/* harmony import */ var _images_wn_png__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../images/wn.png */ \"./src/images/wn.png\");\n/* harmony import */ var _images_q_png__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../images/q.png */ \"./src/images/q.png\");\n/* harmony import */ var _images_wq_png__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../images/wq.png */ \"./src/images/wq.png\");\n/* harmony import */ var _images_k_png__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../images/k.png */ \"./src/images/k.png\");\n/* harmony import */ var _images_wk_png__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../images/wk.png */ \"./src/images/wk.png\");\n/* harmony import */ var _images_p_png__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../images/p.png */ \"./src/images/p.png\");\n/* harmony import */ var _images_wp_png__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../images/wp.png */ \"./src/images/wp.png\");\n//https://commons.wikimedia.org/wiki/File:Chess_Pieces_Sprite.svg\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass Piece{\r\n  constructor(type, posX, posY, isWhite, gameController=null){\r\n    this.pos = {\r\n      x: (posX>7) ? 7 : (posX<0) ? 0 : posX,\r\n      y: (posY>7) ? 7 : (posY<0) ? 0 : posY\r\n    }\r\n    this.type=type\r\n    this.isWhite = isWhite;\r\n    this.isAlive = true;\r\n    this.pieceDiv;\r\n    this.pieceImage;\r\n    this.allMoves = [];\r\n    this.controlledSquares = [];\r\n    this.wasMoved = false;\r\n    this.gameController = gameController;\r\n    this.board;\r\n    this.value = 0;\r\n  }\r\n\r\n  //return piece object with all its parameters\r\n  //and set style and visual position on the board\r\n  createPiece(board){\r\n    this.gameController = board.gameController;\r\n    this.board = board;\r\n\r\n    this.pieceDiv = document.createElement(\"div\");\r\n    let className = (this.type) ? \" \"+this.type : \"\";\r\n\r\n    this.pieceDiv.setAttribute(\"class\", \"piece\" + className);\r\n    //set image for the piece\r\n    switch (this.type) {\r\n      case \"r\":\r\n        this.pieceImage = _images_r_png__WEBPACK_IMPORTED_MODULE_0__;\r\n        break;\r\n      case \"R\":\r\n        this.pieceImage = _images_wr_png__WEBPACK_IMPORTED_MODULE_1__;\r\n        break;\r\n      case \"b\":\r\n        this.pieceImage = _images_b_png__WEBPACK_IMPORTED_MODULE_2__;\r\n        break;\r\n      case \"B\":\r\n        this.pieceImage = _images_wb_png__WEBPACK_IMPORTED_MODULE_3__;\r\n        break;\r\n      case \"n\":\r\n        this.pieceImage = _images_n_png__WEBPACK_IMPORTED_MODULE_4__;\r\n        break;\r\n      case \"N\":\r\n        this.pieceImage = _images_wn_png__WEBPACK_IMPORTED_MODULE_5__;\r\n        break;\r\n      case \"q\":\r\n        this.pieceImage = _images_q_png__WEBPACK_IMPORTED_MODULE_6__;\r\n        break;\r\n      case \"Q\":\r\n        this.pieceImage = _images_wq_png__WEBPACK_IMPORTED_MODULE_7__;\r\n        break;\r\n      case \"k\":\r\n        this.pieceImage = _images_k_png__WEBPACK_IMPORTED_MODULE_8__;\r\n        break;\r\n      case \"K\":\r\n        this.pieceImage = _images_wk_png__WEBPACK_IMPORTED_MODULE_9__;\r\n        break;\r\n      case \"p\":\r\n        this.pieceImage = _images_p_png__WEBPACK_IMPORTED_MODULE_10__;\r\n        break;\r\n      case \"P\":\r\n        this.pieceImage = _images_wp_png__WEBPACK_IMPORTED_MODULE_11__;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    this.pieceDiv.style.background = \"url(\"+ this.pieceImage +\")\";\r\n    this.pieceDiv.style.backgroundSize = \"cover\";\r\n    let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;\r\n\r\n    const dropPiece = (e) => {\r\n      if(e.button === 2){\r\n        //return piece to its original position\r\n        this.pieceDiv.style.left = this.pos.x * (this.board.boardRect.width / 8) + \"px\";\r\n        this.pieceDiv.style.top = this.pos.y * (this.board.boardRect.height / 8) + \"px\";\r\n        this.pieceDiv.style.zIndex = 10;\r\n        this.removeLegalMovesHighlights();\r\n        document.onmouseup = null;\r\n        document.onmousemove = null;\r\n        this.board.drawPieces();\r\n        return;\r\n      }\r\n      document.onmouseup = null;\r\n      document.onmousemove = null;\r\n      this.pieceDiv.style.zIndex = 10;\r\n      this.removeLegalMovesHighlights();\r\n      this.move(\r\n        Math.round((this.pieceDiv.offsetLeft - pos1) / (this.board.boardRect.width / 8)),\r\n        Math.round((this.pieceDiv.offsetTop - pos2) / (this.board.boardRect.height / 8)),\r\n        board\r\n      );\r\n    };\r\n\r\n    const mousedown = (e)=>{\r\n      // get the mouse cursor position at startup:\r\n      pos3 = e.clientX;\r\n      pos4 = e.clientY;\r\n      this.pieceDiv.style.zIndex = 999;\r\n\r\n      this.showLegalMoves(board);\r\n      \r\n      //set piece position and remove listeners on mouse button up\r\n      document.onmouseup = dropPiece;\r\n      \r\n      document.onmousemove = (e)=>{\r\n        e.preventDefault();\r\n        // calculate the new cursor position:\r\n        pos1 = pos3 - e.clientX;\r\n        pos2 = pos4 - e.clientY;\r\n        pos3 = e.clientX;\r\n        pos4 = e.clientY;\r\n        // set the element's new position:\r\n        this.pieceDiv.style.top = (this.pieceDiv.offsetTop - pos2) + \"px\";\r\n        this.pieceDiv.style.left = (this.pieceDiv.offsetLeft - pos1) + \"px\";\r\n      };\r\n    }\r\n\r\n    this.pieceDiv.addEventListener(\"mousedown\", mousedown);\r\n    \r\n    const touchmove = (e)=>{\r\n      // get the touch position:\r\n      this.pieceDiv.style.zIndex = 999;\r\n      let touchLocation = e.targetTouches[0];\r\n      let boardRect = this.gameController.board.boardDiv.getBoundingClientRect();\r\n      let thisRect = this.pieceDiv.getBoundingClientRect();\r\n      let piecePosition = {\r\n        x: touchLocation.pageX-boardRect.x-thisRect.width/2,\r\n        y: touchLocation.pageY-boardRect.y-thisRect.height/2\r\n      }\r\n      this.pieceDiv.style.top = (piecePosition.y) + \"px\";\r\n      this.pieceDiv.style.left = (piecePosition.x) + \"px\";\r\n\r\n\r\n      document.ontouchend = () =>{\r\n        document.ontouchend = null;\r\n        this.pieceDiv.style.zIndex = 10;\r\n        document.body.style.overflow = \"auto\";\r\n\r\n        this.move(\r\n          Math.round((piecePosition.x - pos1)/(this.board.boardRect.width/8)),\r\n          Math.round((piecePosition.y - pos2)/(this.board.boardRect.height/8)),\r\n          board\r\n        )\r\n      }\r\n    }\r\n\r\n    this.pieceDiv.addEventListener(\"touchstart\", ()=>{\r\n      document.body.style.overflow = \"hidden\";\r\n      this.showLegalMoves(board)\r\n    })\r\n    this.pieceDiv.addEventListener(\"touchmove\", touchmove)\r\n\r\n    // board.drawPieces();\r\n    \r\n    board.board[this.pos.y][this.pos.x] = this;\r\n  }\r\n\r\n  //changes position on the screen\r\n  //return false if move was not made\r\n  move(posX, posY, board){\r\n    let moveWasMade = false;\r\n    if(this.gameController.userInterface.currentMove!==this.gameController.movesHistory.length-1) {\r\n      board.drawPieces()\r\n      return moveWasMade;\r\n    }\r\n\r\n    board.getControlledSquares();\r\n    this.allMoves = this.getLegalMoves(board);\r\n\r\n    //check if a move is legal\r\n    this.allMoves.forEach(({x,y,isEmpty, isAlly}) => {\r\n      if(posX==x && posY==y){\r\n        if(isAlly) return;\r\n        moveWasMade = this.gameController.moveValidation(x,y, isEmpty, board, this);\r\n      }\r\n    });\r\n    board.drawPieces();\r\n    return moveWasMade;\r\n    // board.showControlledSquares(true);\r\n  }\r\n\r\n  showLegalMoves(board){\r\n\r\n    //show moves to player that currenty has a turn\r\n    if(!(((this.gameController.whiteToMove && this.isWhite) || (this.gameController.whiteToMove==false && this.isWhite==false)) \r\n    && this.gameController.userInterface.currentMove==this.gameController.movesHistory.length-1)) return;\r\n\r\n    board.getControlledSquares();\r\n\r\n    this.allMoves = [];\r\n    this.allMoves = this.getLegalMoves(board);\r\n\r\n    this.allMoves = this.allMoves.filter(e=>!this.gameController.seeIfCheck(e.x, e.y, e.isEmpty, board, this))\r\n\r\n    //remove all previous dots from the DOM\r\n    this.removeLegalMovesHighlights();\r\n\r\n    this.allMoves.forEach(({x,y, isEmpty, isAlly})=>{\r\n      if(isAlly) return;\r\n      const square = document.createElement(\"div\");\r\n      const point = document.createElement(\"div\");\r\n      square.setAttribute(\"class\", \"square-move\");\r\n      point.setAttribute(\"class\", \"point\");\r\n      square.appendChild(point);\r\n      board.boardDiv.prepend(square);\r\n      if(!isEmpty){\r\n        point.style.border = \"7px solid rgba(150, 150, 150, 0.5)\";\r\n        point.style.background = \"none\";\r\n        square.style.zIndex = 999;\r\n        point.style.width = (this.board.boardRect.width/8)+\"px\";\r\n        point.style.height = (this.board.boardRect.height/8)+\"px\";\r\n      }\r\n      square.style.left = x*(this.board.boardRect.width/8) + \"px\";\r\n      square.style.top = y*(this.board.boardRect.height/8) + \"px\";\r\n      square.onclick = () =>{\r\n        this.move(x,y,board);\r\n        square.onclick = null;\r\n      }\r\n    })\r\n  }\r\n\r\n  removeLegalMovesHighlights() {\r\n    for (const e of document.querySelectorAll(\".square-move\")) {\r\n      e.remove();\r\n    }\r\n  }\r\n\r\n  die(){\r\n    this.isAlive = false;\r\n  }\r\n  \r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Piece);\n\n//# sourceURL=webpack://chess/./src/components/pieces/Piece.js?");

/***/ }),

/***/ "./src/components/pieces/Queen.js":
/*!****************************************!*\
  !*** ./src/components/pieces/Queen.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Piece__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Piece */ \"./src/components/pieces/Piece.js\");\n/* harmony import */ var _helpers_checkDiagonalAndStraigt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../helpers/checkDiagonalAndStraigt */ \"./src/components/helpers/checkDiagonalAndStraigt.js\");\n\r\n\r\n\r\nclass Queen extends _Piece__WEBPACK_IMPORTED_MODULE_0__[\"default\"]{\r\n  constructor(type, posX, posY, isWhite){\r\n    super(type, posX, posY, isWhite);\r\n    this.value = 9;\r\n  }\r\n\r\n  getLegalMoves(board){\r\n    let legalMoves = [];\r\n    (0,_helpers_checkDiagonalAndStraigt__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(1, 0, board, legalMoves, this.pos.x, this.pos.y, this.isWhite)\r\n    ;(0,_helpers_checkDiagonalAndStraigt__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(-1, 0, board, legalMoves, this.pos.x, this.pos.y, this.isWhite)\r\n    ;(0,_helpers_checkDiagonalAndStraigt__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(0, 1, board, legalMoves, this.pos.x, this.pos.y, this.isWhite)\r\n    ;(0,_helpers_checkDiagonalAndStraigt__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(0, -1, board, legalMoves, this.pos.x, this.pos.y, this.isWhite)\r\n    ;(0,_helpers_checkDiagonalAndStraigt__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(1, 1, board, legalMoves, this.pos.x, this.pos.y, this.isWhite)\r\n    ;(0,_helpers_checkDiagonalAndStraigt__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(-1, 1, board, legalMoves, this.pos.x, this.pos.y, this.isWhite)\r\n    ;(0,_helpers_checkDiagonalAndStraigt__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(1, -1, board, legalMoves, this.pos.x, this.pos.y, this.isWhite)\r\n    ;(0,_helpers_checkDiagonalAndStraigt__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(-1, -1, board, legalMoves, this.pos.x, this.pos.y, this.isWhite)\r\n    return legalMoves;\r\n  }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Queen);\n\n//# sourceURL=webpack://chess/./src/components/pieces/Queen.js?");

/***/ }),

/***/ "./src/components/pieces/Rook.js":
/*!***************************************!*\
  !*** ./src/components/pieces/Rook.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Piece__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Piece */ \"./src/components/pieces/Piece.js\");\n/* harmony import */ var _helpers_checkDiagonalAndStraigt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../helpers/checkDiagonalAndStraigt */ \"./src/components/helpers/checkDiagonalAndStraigt.js\");\n\r\n\r\n\r\nclass Rook extends _Piece__WEBPACK_IMPORTED_MODULE_0__[\"default\"]{\r\n  constructor(type, posX, posY, isWhite){\r\n    super(type, posX, posY, isWhite);\r\n    this.value = 5;\r\n  }\r\n\r\n  getLegalMoves(board){\r\n    let legalMoves = [];\r\n    \r\n    (0,_helpers_checkDiagonalAndStraigt__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(1, 0, board, legalMoves, this.pos.x, this.pos.y, this.isWhite)\r\n    ;(0,_helpers_checkDiagonalAndStraigt__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(-1, 0, board, legalMoves, this.pos.x, this.pos.y, this.isWhite)\r\n    ;(0,_helpers_checkDiagonalAndStraigt__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(0, 1, board, legalMoves, this.pos.x, this.pos.y, this.isWhite)\r\n    ;(0,_helpers_checkDiagonalAndStraigt__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(0, -1, board, legalMoves, this.pos.x, this.pos.y, this.isWhite)\r\n\r\n    return legalMoves;\r\n  }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Rook);\n\n//# sourceURL=webpack://chess/./src/components/pieces/Rook.js?");

/***/ }),

/***/ "./src/components/pieces/king.js":
/*!***************************************!*\
  !*** ./src/components/pieces/king.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _Piece__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Piece */ \"./src/components/pieces/Piece.js\");\n\r\n\r\nclass King extends _Piece__WEBPACK_IMPORTED_MODULE_0__[\"default\"]{\r\n  constructor(type, posX, posY, isWhite){\r\n    super(type, posX, posY, isWhite);\r\n    // this.enemySquares = []\r\n    this.castle = false;\r\n    this.castleLong = false;\r\n    this.rooks = [];\r\n    this.value = 0;\r\n  }\r\n\r\n  getLegalMoves(board){\r\n    let legalMoves = []\r\n    //save valid squares \r\n    //loop through the board\r\n    for (let i = 0; i < board.board.length; i++) {\r\n      for (let j = 0; j < board.board[i].length; j++) {\r\n        //find the squares that the king could move to\r\n        if((j<=this.pos.x+1 && j>=this.pos.x-1) &&\r\n        (i>=this.pos.y-1 && i<=this.pos.y+1)){\r\n          if(!(i==this.pos.y && j==this.pos.x)){\r\n            //if the square is empty or if the piece on this square is opposite color\r\n            //add sqare to legal squares\r\n            if(board.board[i][j]===\"-\"){\r\n              legalMoves.push({\r\n                x: j, \r\n                y: i, \r\n                isEmpty: true,\r\n                isAlly: undefined\r\n              });\r\n            }else{\r\n              legalMoves.push({\r\n                x: j, \r\n                y: i, \r\n                isEmpty: false,\r\n                isAlly: (board.board[i][j].isWhite==this.isWhite) ? true : false\r\n              });\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    if(this.isWhite){\r\n      this.enemySquares = board.controlledSquares.black;\r\n    }else{\r\n      this.enemySquares = board.controlledSquares.white;\r\n    }\r\n    //calculate set difference to make sure king cannot run into check\r\n    legalMoves = legalMoves.filter(({ x: x1, y: y1 }) => !this.enemySquares.some(({ x: x2, y: y2}) => (x2 === x1 && y2 === y1)));\r\n\r\n    this.castleValidation(board);\r\n    \r\n    if(this.castle){\r\n      //add castling to valid moves\r\n      legalMoves.push({\r\n        x: this.pos.x+2,\r\n        y: this.pos.y,\r\n        isEmpty: true,\r\n        castle: {long: false, rook: this.rooks[1]},\r\n      })\r\n    }\r\n    if(this.castleLong){\r\n      legalMoves.push({\r\n        x: this.pos.x-2,\r\n        y: this.pos.y,\r\n        isEmpty: true,\r\n        castle: {long: true, rook: this.rooks[0]},\r\n      })\r\n    }\r\n    \r\n    return legalMoves;\r\n  }\r\n\r\n  castleValidation(board){\r\n    this.castle = true;\r\n    this.castleLong = true;\r\n\r\n    if((board.gameController.inCheck.white && this.isWhite) || (board.gameController.inCheck.black && !this.isWhite)){\r\n      this.castle = false;\r\n      this.castleLong = false;\r\n      return;\r\n    }\r\n    if(this.wasMoved){\r\n      this.castle = false;\r\n      this.castleLong = false;\r\n      return;\r\n    }\r\n    //when pieces are in the way\r\n    if(board.board[this.pos.y][this.pos.x+1]!==\"-\" ||\r\n      board.board[this.pos.y][this.pos.x+2]!==\"-\"){\r\n        this.castle = false;\r\n    }\r\n    if(board.board[this.pos.y][this.pos.x-1]!==\"-\" ||\r\n      board.board[this.pos.y][this.pos.x-2]!==\"-\" ||\r\n      board.board[this.pos.y][this.pos.x-3]!==\"-\"){\r\n        this.castleLong = false;\r\n    }\r\n    if(!this.castleLong && !this.castle) return;\r\n\r\n    //when one of the rooks was moved\r\n    if(this.gameController){\r\n      if(this.isWhite){\r\n        this.rooks = this.gameController.findRooks(board).white\r\n      }else{\r\n        this.rooks = this.gameController.findRooks(board).black\r\n      }\r\n      this.castle = false;\r\n      this.castleLong = false;\r\n      const kingRow = this.isWhite ? 7 : 0;\r\n\r\n      this.rooks.forEach(rook=>{\r\n        if(!rook.wasMoved){\r\n          if(rook.pos.x==7 && rook.pos.y==kingRow){\r\n            this.castle = true;\r\n          }\r\n          if(rook.pos.x==0 && rook.pos.y==kingRow){\r\n            this.castleLong = true;\r\n          }\r\n        }\r\n      })\r\n    }\r\n    if(!this.castleLong && !this.castle) return;\r\n\r\n    //if the squares are not controlled by enemy\r\n    this.enemySquares.forEach(({x,y})=>{\r\n      if(y==this.pos.y && (\r\n        x==this.pos.x+1 ||\r\n        x==this.pos.x+2\r\n      )){\r\n          this.castle = false;\r\n      }\r\n      if(y==this.pos.y && (\r\n        x==this.pos.x-1 ||\r\n        x==this.pos.x-2 ||\r\n        x==this.pos.x-3\r\n      )){\r\n          this.castleLong = false;\r\n      }\r\n    })\r\n    \r\n  }\r\n\r\n  //changes position on the screen\r\n  move(posX, posY, board){\r\n    let moveWasMade = false;\r\n    \r\n    if(this.gameController.userInterface.currentMove!==this.gameController.movesHistory.length-1) {\r\n      board.drawPieces()\r\n      return moveWasMade;\r\n    }\r\n\r\n    this.legalMoves = this.getLegalMoves(board);\r\n    \r\n    //check if a move is legal\r\n    this.legalMoves.forEach(({x,y,isEmpty, isAlly, castle}) => {\r\n      if(posX==x && posY==y){\r\n        if(isAlly) return;\r\n        moveWasMade = this.gameController.moveValidation(x,y,isEmpty,board,this,castle);\r\n      }\r\n    });\r\n    board.drawPieces();\r\n    return moveWasMade\r\n  }\r\n}\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (King);\n\n//# sourceURL=webpack://chess/./src/components/pieces/king.js?");

/***/ }),

/***/ "./src/images/b.png":
/*!**************************!*\
  !*** ./src/images/b.png ***!
  \**************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("module.exports = __webpack_require__.p + \"e5cea84a2dbf7b8a0617.png\";\n\n//# sourceURL=webpack://chess/./src/images/b.png?");

/***/ }),

/***/ "./src/images/k.png":
/*!**************************!*\
  !*** ./src/images/k.png ***!
  \**************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("module.exports = __webpack_require__.p + \"b711e57af1dd1b9a4c19.png\";\n\n//# sourceURL=webpack://chess/./src/images/k.png?");

/***/ }),

/***/ "./src/images/n.png":
/*!**************************!*\
  !*** ./src/images/n.png ***!
  \**************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("module.exports = __webpack_require__.p + \"ab9372216a4a0a25f391.png\";\n\n//# sourceURL=webpack://chess/./src/images/n.png?");

/***/ }),

/***/ "./src/images/p.png":
/*!**************************!*\
  !*** ./src/images/p.png ***!
  \**************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("module.exports = __webpack_require__.p + \"1164a604b19526b5ff75.png\";\n\n//# sourceURL=webpack://chess/./src/images/p.png?");

/***/ }),

/***/ "./src/images/q.png":
/*!**************************!*\
  !*** ./src/images/q.png ***!
  \**************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("module.exports = __webpack_require__.p + \"bd9dbb9da1485a127881.png\";\n\n//# sourceURL=webpack://chess/./src/images/q.png?");

/***/ }),

/***/ "./src/images/r.png":
/*!**************************!*\
  !*** ./src/images/r.png ***!
  \**************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("module.exports = __webpack_require__.p + \"25a538e5a5efdbfd0f8b.png\";\n\n//# sourceURL=webpack://chess/./src/images/r.png?");

/***/ }),

/***/ "./src/images/wb.png":
/*!***************************!*\
  !*** ./src/images/wb.png ***!
  \***************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("module.exports = __webpack_require__.p + \"5af989d81a6020e9876c.png\";\n\n//# sourceURL=webpack://chess/./src/images/wb.png?");

/***/ }),

/***/ "./src/images/wk.png":
/*!***************************!*\
  !*** ./src/images/wk.png ***!
  \***************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("module.exports = __webpack_require__.p + \"fdb443f7426b9cd939f2.png\";\n\n//# sourceURL=webpack://chess/./src/images/wk.png?");

/***/ }),

/***/ "./src/images/wn.png":
/*!***************************!*\
  !*** ./src/images/wn.png ***!
  \***************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("module.exports = __webpack_require__.p + \"951791b363fc4853a3b5.png\";\n\n//# sourceURL=webpack://chess/./src/images/wn.png?");

/***/ }),

/***/ "./src/images/wp.png":
/*!***************************!*\
  !*** ./src/images/wp.png ***!
  \***************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("module.exports = __webpack_require__.p + \"d97bbc3e5663f6e448f0.png\";\n\n//# sourceURL=webpack://chess/./src/images/wp.png?");

/***/ }),

/***/ "./src/images/wq.png":
/*!***************************!*\
  !*** ./src/images/wq.png ***!
  \***************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("module.exports = __webpack_require__.p + \"9696bbdd9c5913f63c04.png\";\n\n//# sourceURL=webpack://chess/./src/images/wq.png?");

/***/ }),

/***/ "./src/images/wr.png":
/*!***************************!*\
  !*** ./src/images/wr.png ***!
  \***************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval("module.exports = __webpack_require__.p + \"d78993b3b95d62fa5aed.png\";\n\n//# sourceURL=webpack://chess/./src/images/wr.png?");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _components_Board_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./components/Board.js */ \"./src/components/Board.js\");\n/* harmony import */ var _components_GameController_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./components/GameController.js */ \"./src/components/GameController.js\");\n/* harmony import */ var _components_UserInterface_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components/UserInterface.js */ \"./src/components/UserInterface.js\");\n/* harmony import */ var _style_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./style.css */ \"./src/style.css\");\n\r\n\r\n\r\n\r\n\r\nconst userInterface = new _components_UserInterface_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"]()\r\nconst gameController = new _components_GameController_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](userInterface);\r\nconst board = new _components_Board_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"](gameController);\r\nboard.createBoard();\r\nuserInterface.init(board, gameController);\r\ngameController.init(\"rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1\", board);\r\n\r\nwindow.addEventListener(\"contextmenu\", (e) => e.preventDefault());\n\n//# sourceURL=webpack://chess/./src/index.js?");

/***/ }),

/***/ "./src/style.css":
/*!***********************!*\
  !*** ./src/style.css ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js */ \"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleDomAPI.js */ \"./node_modules/style-loader/dist/runtime/styleDomAPI.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertBySelector.js */ \"./node_modules/style-loader/dist/runtime/insertBySelector.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js */ \"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/insertStyleElement.js */ \"./node_modules/style-loader/dist/runtime/insertStyleElement.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! !../node_modules/style-loader/dist/runtime/styleTagTransform.js */ \"./node_modules/style-loader/dist/runtime/styleTagTransform.js\");\n/* harmony import */ var _node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! !!../node_modules/css-loader/dist/cjs.js!./style.css */ \"./node_modules/css-loader/dist/cjs.js!./src/style.css\");\n\n      \n      \n      \n      \n      \n      \n      \n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = (_node_modules_style_loader_dist_runtime_styleTagTransform_js__WEBPACK_IMPORTED_MODULE_5___default());\noptions.setAttributes = (_node_modules_style_loader_dist_runtime_setAttributesWithoutAttributes_js__WEBPACK_IMPORTED_MODULE_3___default());\n\n      options.insert = _node_modules_style_loader_dist_runtime_insertBySelector_js__WEBPACK_IMPORTED_MODULE_2___default().bind(null, \"head\");\n    \noptions.domAPI = (_node_modules_style_loader_dist_runtime_styleDomAPI_js__WEBPACK_IMPORTED_MODULE_1___default());\noptions.insertStyleElement = (_node_modules_style_loader_dist_runtime_insertStyleElement_js__WEBPACK_IMPORTED_MODULE_4___default());\n\nvar update = _node_modules_style_loader_dist_runtime_injectStylesIntoStyleTag_js__WEBPACK_IMPORTED_MODULE_0___default()(_node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"], options);\n\n\n\n\n       /* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (_node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"] && _node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals ? _node_modules_css_loader_dist_cjs_js_style_css__WEBPACK_IMPORTED_MODULE_6__[\"default\"].locals : undefined);\n\n\n//# sourceURL=webpack://chess/./src/style.css?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		var scriptUrl;
/******/ 		if (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + "";
/******/ 		var document = __webpack_require__.g.document;
/******/ 		if (!scriptUrl && document) {
/******/ 			if (document.currentScript && document.currentScript.tagName.toUpperCase() === 'SCRIPT')
/******/ 				scriptUrl = document.currentScript.src;
/******/ 			if (!scriptUrl) {
/******/ 				var scripts = document.getElementsByTagName("script");
/******/ 				if(scripts.length) {
/******/ 					var i = scripts.length - 1;
/******/ 					while (i > -1 && (!scriptUrl || !/^http(s?):/.test(scriptUrl))) scriptUrl = scripts[i--].src;
/******/ 				}
/******/ 			}
/******/ 		}
/******/ 		// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration
/******/ 		// or pass an empty string ("") and set the __webpack_public_path__ variable from your code to use your own logic.
/******/ 		if (!scriptUrl) throw new Error("Automatic publicPath is not supported in this browser");
/******/ 		scriptUrl = scriptUrl.replace(/^blob:/, "").replace(/#.*$/, "").replace(/\?.*$/, "").replace(/\/[^\/]+$/, "/");
/******/ 		__webpack_require__.p = scriptUrl;
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/nonce */
/******/ 	(() => {
/******/ 		__webpack_require__.nc = undefined;
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.js");
/******/ 	
/******/ })()
;